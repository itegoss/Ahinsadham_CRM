{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Donor / Volunteer</title>
    <style>
        body { margin:0; padding:0; font-family:Arial,sans-serif; background:#f4faf4; display:flex; justify-content:center; align-items:center; min-height:100vh;}
        .overlay { position:fixed; width:100%; height:100%; background:rgba(0,0,0,0.15); backdrop-filter:blur(4px);}
        .popup-card { position:relative; width:90%; max-width:1200px; background:white; padding:50px 40px; border-radius:20px; box-shadow:0px 15px 40px rgba(0,0,0,0.2);}
        .title { text-align:center; font-size:38px; font-weight:bold; color:#1e7a33; margin-bottom:6px; }
        .subtitle { text-align:center; font-size:18px; color:gray; margin-bottom:35px; }
        .section-label { font-size:22px; color:green; font-weight:bold; margin-bottom:8px;}
        .line { width:100%; height:2px; background:#d1e5d1; margin-bottom:30px; }
        .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:25px 40px;}
        .form-group label { font-weight:600; color:#333; display:block; margin-bottom:5px; }
        .form-group input, .form-group textarea, .form-group select { color:black;width:100%; padding:14px; border-radius:10px; border:2px solid #cce4cc; font-size:16px; background:#f8fff8; }
        textarea { min-height:100px; resize:none; }
        input:focus, textarea:focus, select:focus { border-color:#21873b; background:white; outline:none; }
        .btn-area { text-align:center; margin-top:40px; }
        button { padding:14px 40px; border-radius:8px; font-size:18px; font-weight:bold; cursor:pointer; border:none; margin:0 10px; }
        .btn-submit { background:#21873b; color:white; }
        .btn-submit:hover { background:#17612a; }
        .btn-back { background:#6c757d; color:white; }
        .btn-back:hover { background:#565e64;}
        .close-btn { position:absolute; top:18px; right:18px; font-size:22px; background:none; border:none; cursor:pointer; }
        .close-btn:hover { color:red; }
    </style>
</head>
<body>

<div class="overlay"></div>

<div class="popup-card">

    <button class="close-btn" onclick="window.history.back()">✖</button>

    <div class="title">Edit Donor / Volunteer</div>
    <div class="subtitle">Modify details below</div>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Personal Details -->
        <div class="section-label">Personal Details</div>
        <div class="line"></div>
        <div class="form-grid">
            
            <div class="form-group">
                <label>Person Type</label>
                <!-- Person Type -->

                <select name="person_type">
                    {% for pt in person_types %}
                        <option value="{{ pt.id }}" {% if donor.person_type.id == pt.id %}selected{% endif %}>{{ pt }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>First Name</label>
                <input type="text" name="first_name" value="{{ donor.first_name }}">
            </div>
            <div class="form-group">
                <label>Middle Name</label>
                <input type="text" name="middle_name" value="{{ donor.middle_name }}">
            </div>
            <div class="form-group">
                <label>Last Name</label>
                <input type="text" name="last_name" value="{{ donor.last_name }}">
            </div>
            <div class="form-group">
                <label>Gender</label>
                <input type="text" name="gender" value="{{ donor.gender }}">
            </div>
            <div class="form-group">
                <label>Date of Birth</label>
                <input type="date" name="date_of_birth" value="{{ donor.date_of_birth|date:'Y-m-d' }}">
            </div>
            <div class="form-group">
                <label>Blood Group</label>
                <select name="blood_group">
                    {% for bg, bg_label in donor.BLOOD_GROUP_CHOICES %}
                        <option value="{{ bg }}" {% if donor.blood_group == bg %}selected{% endif %}>{{ bg_label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Contact Number</label>
                <input type="text" name="contact_number" value="{{ donor.contact_number }}">
            </div>
            <div class="form-group">
                <label>WhatsApp Number</label>
                <input type="text" name="whatsapp_number" value="{{ donor.whatsapp_number }}">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" value="{{ donor.email }}">
            </div>
            <div class="form-group">
                <label>Donor Box ID</label>
                <input type="text" name="donor_box_id" value="{{ donor.donor_box_id }}">
            </div>
        </div>

        <!-- Address -->
        <div class="section-label">Address</div>
        <div class="line"></div>
        <div class="form-grid">
            <div class="form-group">
                <label>House Number</label>
                <input type="text" name="house_number" value="{{ donor.house_number }}">
            </div>
            <div class="form-group">
                <label>Building Name</label>
                <input type="text" name="building_name" value="{{ donor.building_name }}">
            </div>
            <div class="form-group">
                <label>Landmark</label>
                <input type="text" name="landmark" value="{{ donor.landmark }}">
            </div>
            <div class="form-group">
                <label>Area</label>
                <input type="text" name="area" value="{{ donor.area }}">
            </div>
            <div class="form-group">
                <label>City</label>
                <input type="text" name="city" value="{{ donor.city }}">
            </div>
            <div class="form-group">
                <label>State</label>
                <input type="text" name="state" value="{{ donor.state }}">
            </div>
            <div class="form-group">
                <label>Country</label>
                <input type="text" name="country" value="{{ donor.country }}">
            </div>
            <div class="form-group">
                <label>Postal Code</label>
                <input type="text" name="postal_code" value="{{ donor.postal_code }}">
            </div>
        </div>

        <!-- ID & PAN -->
        <div class="section-label">ID & PAN</div>
        <div class="line"></div>
        <div class="form-grid">
            <div class="form-group">
                <label>ID Type</label>
                <select name="id_type">
                    {% for idt in id_types %}
                        <option value="{{ idt.id }}" {% if donor.id_type.id == idt.id %}selected{% endif %}>{{ idt }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>ID Number</label>
                <input type="text" name="id_number" value="{{ donor.id_number }}">
            </div>
            <div class="form-group">
                <label>PAN Number</label>
                <input type="text" name="pan_number" value="{{ donor.pan_number }}">
            </div>
        </div>

        <div class="btn-area">
            <button class="btn-submit" type="submit">✔ Update</button>
            <button type="button" class="btn-back" onclick="window.history.back()">← Back</button>
        </div>

    </form>
</div>

</body>
</html>
