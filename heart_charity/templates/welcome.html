{% extends 'base.html' %} 
{% load static %}
{% block content %}

<style>
.dashboard-container {
        display: flex;
        min-height: 100vh;
    } 
    /* Mobile Header */
    .mobile-header {
        display: none;
        background: #184d61;
        color: white;
        padding: 15px;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
      .mobile-header h1 {
        font-size: 1.2rem;
    }
    .menu-toggle {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
    }
    /* Sidebar */
.sidebar {
  width: 250px;
  background: linear-gradient(135deg, #012a1d 0%, #09e6c1 100%);
  color: white;
  transition: all 0.3s ease;
  overflow-y: auto;        /* allow scrolling */
  scrollbar-width: none;   /* hide scrollbar (for Firefox) */
  height: 100vh;
  position: sticky;
  top: 0;
}
    .sidebar-header {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }  
    .sidebar-toggle {
        position: absolute;
        right: -15px;
        top: 20px;
        width: 30px;
        height: 30px;
        background: #184d61;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .sidebar.collapsed {
        width: 70px;
    }
    .sidebar.collapsed .sidebar-text {
        display: none;
    }
    
    .sidebar a {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        color: rgba(255,255,255,0.8);
        text-decoration: none;
        transition: all 0.2s;
        border-left: 3px solid transparent;
    }
    .sidebar a:hover, .sidebar a.active {
        background: rgba(255,255,255,0.1);
        color: white;
        border-left: 3px solid white;
    }
    .sidebar i {
        margin-right: 10px;
        font-size: 1.2rem;
    }
    .sidebar.collapsed i {
        margin-right: 0;
        font-size: 1.4rem;
    }
    /* Main Content */
    .content {
        flex: 1;
        padding: 20px;
        overflow: auto;
    }
    .content-header h1 {
        color: #184d61;
        font-size: 1.8rem;
        margin-bottom: 5px;
    }
    .content-header p {
        color: #666;
    }
    .search-input {
        width: 100%;
        padding: 12px 45px 12px 15px;
        border: 1px solid #ddd;
        border-radius: 30px;
        font-size: 1rem;
        background-color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: all 0.2s;
    }
    
    .search-input:focus {
        border-color: #184d61;
        outline: none;
        box-shadow: 0 2px 8px rgba(24, 77, 97, 0.2);
    }
    
    .search-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #666;
    }
    /* Tab Content */
    .tab-content {
        display: none;
        animation: fadeIn 0.3s ease-in-out;
    }
    .tab-content.active {
        display: block;
    }
     .hero-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 60px 50px;
    border-radius: 18px;
    background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
    box-shadow: 0 6px 20px rgba(0,0,0,0.06);
    margin-bottom: 50px;
  }
  .hero-content {
    max-width: 50%;
  }
  .hero-title {
    font-size: 2.6rem;
    font-weight: 700;
    color: #0f172a;
    margin-bottom: 12px;
  }
  .hero-subtitle {
    font-size: 1.2rem;
    color: #334155;
    margin-bottom: 16px;
  }
  .hero-description {
    color: #475569;
    line-height: 1.6;
    margin-bottom: 24px;
  }
  .hero-button {
    background-color: #0284c7;
    color: white;
    text-decoration: none;
    padding: 12px 28px;
    border-radius: 8px;
    font-weight: 600;
    transition: background 0.25s ease;
  }
  .hero-image {
    width: 45%;
    text-align: right;
  }
  .hero-image img {
    max-width: 100%;
    border-radius: 16px;
  }
  /* Form Styles */
    .form-container {
        background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        max-width: 800px;
        margin: 0 auto;
    }
     .form-header {
        text-align: center;
        margin-bottom: 25px;
    } 
    .form-header h2 {
        color: #184d61;
        margin-bottom: 5px;
    }
    .progress-bar {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        position: relative;
    }
    .progress-bar::before {
        content: '';
        position: absolute;
        top: 15px;
        left: 0;
        right: 0;
        height: 2px;
        background: #e0e0e0;
        z-index: 0;
    }
     .progress-step {
        position: relative;
        z-index: 1;
        text-align: center;
    }
    .progress-step-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #e0e0e0;
        color: #666;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 5px;
        font-weight: 600;
        font-size: 0.8rem;
    }
    .progress-step.active .progress-step-circle {
        background: #184d61;
        color: white;
    }
    .progress-step-label {
        font-size: 0.7rem;
        color: #666;
    }
    .form-step {
        display: none;
    }
    .form-step.active {
        display: block;
        animation: fadeIn 0.3s ease-in-out;
    }
    .form-step h5 {
        color: #184d61;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
    }
    .form-group input, .form-group select, .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
        border-color: #184d61;
        outline: none;
    }
    .form-group .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .form-group .checkbox-group input {
        width: auto;
    }
 /* Align buttons (like View Donations) to the right inside their container */
.button-group {
  display: flex;
  justify-content: flex-end;  /* pushes button to right */
  margin-bottom: 15px;
  padding-right: 10px;
}  
 .btn {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.2s;
} 
    .btn-primary {
        background: #184d61;
        color: white;
    }
    
    .btn-primary:hover {
        background: #0d3342;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-secondary:hover {
        background: #5a6268;
    }
    /* Placeholder Content */
    .placeholder-content {
        text-align: center;
        padding: 50px 20px;
        color: #666;
    }
    .placeholder-content i {
        font-size: 3rem;
        margin-bottom: 15px;
        color: #ccc;
    }
    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    /* Responsive Design */
    @media (max-width: 768px) {
        .mobile-header {
            display: flex;
            height:70%;
        }   
        .sidebar {
            position: fixed;
            left: -250px;
            height: 100vh;
            z-index: 1000;
            transition: left 0.3s ease;
                top: 76px
        }
        .sidebar.active {
            left: 0;
        }
        .sidebar.collapsed {
            width: 250px;
        }
        .sidebar.collapsed .sidebar-text {
            display: inline;
        }
        .sidebar-toggle {
            display: none;
        }
        .content {
            margin-left: 0;
        }
        .hero-title {
            font-size: 1.5rem;
        }
        .feature-cards {
            grid-template-columns: 1fr;
        }
        .form-container {
            padding: 20px 15px;
        }
        .progress-step-label {
            font-size: 0.6rem;
        }
        .button-group {
            flex-direction: column;
            gap: 10px;
        }
        .btn {
            width: 100%;
        }  
    .dashboard-container {
        display: grid;
        min-height: 100vh;
    }
    }
/*  user table  */
     table {
      width: 90%;
      margin: 30px auto;
      border-collapse: collapse;
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 14px 15px;
      border-bottom: 1px solid #eee;
    }
    tr:hover {
      background: #f1f3ff;
    }
   /* ==== ACTION BUTTONS ==== */
td a.btn {
  display: inline-block;
  padding: 8px 16px;
  margin: 0 5px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.25s ease;
}
/* Align top button to right */
.button-group.top-right {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 15px;
  padding-right: 15px;
}
/* View Donations button styling */
#viewDonationsBtn {
  background-color: #17a2b8;
  color: #fff;
  border: none;
  padding: 10px 22px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
}
#viewDonationsBtn:hover {
  background-color: #138496;
  transform: translateY(-2px);
}
#viewDonationsBtn:active {
  transform: translateY(0);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.table-responsive{
  margin-top: -1% !important;
}
.card{
    --bs-card-bg: none !important;
}
h1 {
    text-align: center;
    color: #1b5e20;
    margin-bottom: 30px;
  }
  h3 {
    color: #1b5e20;
    margin-bottom: 15px;
  }
  /* üìÑ Report Form Styling */
  form {
    border-radius: 10px;
  }
  form label {
    font-weight: 600;
    color: #333;
  }
  form select {
    color: black;
    background-color: unset;
    width: 100%;
    padding: 10px;
    border: 1px solid #bbb;
    border-radius: 6px;
    margin-top: 8px;
    margin-bottom: 15px;
  }
  form button {
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }
  /* üìä Table Styling */
  table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
  }
  th, td {
    padding: 12px 15px;
  }

  th {
    color: #fff;
    text-transform: uppercase;
    font-size: 12px;
  }
td {
    font-size: 12px;
}
  tr:nth-child(even) {
    background-color: #f3f6fc;
  }

  tr:hover {
    background-color: #e6ecff;
    transition: background 0.3s ease;
  }


  /* üè∑ Status Badges */
  .badge-success {
    background-color: #28a745;
    color: white;
    padding: 5px 10px;
    border-radius: 6px;
  }

  .badge-warning {
    background-color: #ffc107;
    color: #333;
    padding: 5px 10px;
    border-radius: 6px;
  }

  .badge-failed {
    background-color: #dc3545;
    color: white;
    padding: 5px 10px;
    border-radius: 6px;
  }

  /* üîô Back Button */
  .back-link {
    display: inline-block;
    margin-top: 30px;
    background: #6c757d;
    color: white;
    padding: 10px 20px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
  }

  .back-link:hover {
    background: #495057;
  }

  .content-header {
    margin-bottom: 20px;
    margin-left: 74%;
}


/* Make table header sticky and body scrollable */
.sticky-table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  display: block;
  max-height: 500px;      /* Height of visible area */
  overflow-y: auto;       /* Scroll only the body */
}

/* Sticky header styling */
.sticky-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
}

/* Ensure header background is visible when sticky */
.sticky-table thead th {

  text-align: center;
  vertical-align: middle;
}

/* Make sure rows display properly */
.sticky-table tbody tr td {
  background: #fff;
}

/* Optional: hover and padding tweaks */
.sticky-table tbody tr:hover {
  background-color: #f6fff6;
}

  /* üì± Responsive Design */
  @media (max-width: 768px) {
    form, table {
      width: 100%;
      font-size: 14px;
    }

    th, td {
      padding: 10px 8px;
    }
  }












   /* Form Styles */
    .form-container {
        background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        max-width: 800px;
        margin: 0 auto;
    }
    
    .form-header {
        text-align: center;
        margin-bottom: 25px;
    }
    
    .form-header h2 {
        color: #184d61;
        margin-bottom: 5px;
    }
    
    .progress-bar {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        position: relative;
    }
    
    .progress-bar::before {
        content: '';
        position: absolute;
        top: 15px;
        left: 0;
        right: 0;
        height: 2px;
        background: #e0e0e0;
        z-index: 0;
    }
    
    .progress-step {
        position: relative;
        z-index: 1;
        text-align: center;
    }
    
    .progress-step-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #e0e0e0;
        color: #666;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 5px;
        font-weight: 600;
        font-size: 0.8rem;
    }
    
    .progress-step.active .progress-step-circle {
        background: #184d61;
        color: white;
    }
    
    .progress-step-label {
        font-size: 0.7rem;
        color: #666;
    }
    
    .form-step {
        display: none;
    }
    
    .form-step.active {
        display: block;
        animation: fadeIn 0.3s ease-in-out;
    }
    
    .form-step h5 {
        color: #184d61;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .form-group {
        margin-bottom: 15px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
    }
    
    .form-group input, .form-group select, .form-group textarea {
        width: 50% !important;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }
    
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
        border-color: #184d61;
        outline: none;
    }
    
    .form-group .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .form-group .checkbox-group input {
        width: auto;
    }
.button-group {
  display: flex;
  justify-content: flex-end;  /* pushes button to right */
  margin-bottom: 15px;
  padding-right: 10px;
}  
 .btn {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.2s;
}
    .btn-primary {
        background: #184d61;
        color: white;
    }
    .btn-primary:hover {
        background: #0d3342;
    }
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    .btn-secondary:hover {
        background: #5a6268;
    }
    /* Placeholder Content */
    .placeholder-content {
        text-align: center;
        padding: 50px 20px;
        color: #666;
    }
    
    .placeholder-content i {
        font-size: 3rem;
        margin-bottom: 15px;
        color: #ccc;
    }
    
    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    } 
.download-form {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
}

.download-group {
  display: flex;
  flex-direction: column;
}
.download-group label {
  font-weight: 600;
  color: #374151;
  margin-bottom: 5px;
  font-size: 14px;
}

/* üåø Input styling ‚Äî bottom border only */
.download-group input[type="date"],
.download-group input[type="text"] {
  border: none;
  border-bottom: 2px solid #198754; 
  padding: 8px 4px;
  font-size: 14px;
  width: 200px;
  outline: none;
  background-color: transparent;
  transition: border-color 0.3s ease;
}
.download-group input:focus {
  border-bottom-color: #0f5132; 
}
/* üåø Button style */
.download-btn {
  color: white;
  border: none;
  border-radius: 6px;
  padding: 10px 18px;
  font-weight: 600;
  cursor: pointer;
  align-self: flex-end;
  margin-top: 25px;
}
/* Make the table wrapper scrollable */
.table-scroll-wrapper {
  width: 100%;
  overflow-x: auto;
  overflow-y: auto;
  border: 1px solid #ddd;
  scroll-behavior: smooth;
}
/* Keep table wide so scrollbars stay visible */
.table-scroll-wrapper table {
  min-width: max-content;
  width: auto;
}

.table-scroll-wrapper th,
.table-scroll-wrapper td {
  white-space: nowrap;
  vertical-align: middle;
}
.pagination-container {
  margin-top: -20px;
  text-align: center;
}
.card{
    --bs-card-bg: none !important;
}

.column-search {
    width: 120px;
    padding: 4px 0;
    border: none !important;
    border-bottom: 2px solid #28a745 !important;
    background: transparent !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    outline: none !important;
    appearance: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
}
.column-search:focus {
    border-bottom: 2px solid #28a745 !important;
}
.column-search::placeholder {
    color: #6c757d !important;
}
</style>

<div class="dashboard-container">
    <!-- Mobile Header -->
    <div class="mobile-header">
        <h1>Dashboard</h1>
        <button class="menu-toggle" id="mobileMenuToggle">
            <i class="bi bi-list"></i>
        </button>
    </div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-toggle" id="sidebarToggle">
            <i class="bi bi-chevron-left" id="toggleIcon"></i>
        </div>

{% if user.is_superuser %}
<a class="tab-btn active" data-tab="default-user">
    <i class="bi bi-bar-chart-line"></i>
    <span class="sidebar-text">Dashboard</span>
</a>

<a class="tab-btn mdm" data-tab="mdm">
    <i class="bi bi-table"></i>
    <span class="sidebar-text">MDM</span>
</a>

<a class="tab-btn user" data-tab="user">
    <i class="bi bi-person"></i>
    <span class="sidebar-text">User</span>
</a>

<a class="tab-btn user" data-tab="roles">
    <i class="bi bi-shield-lock"></i>
    <span class="sidebar-text">Roles</span>
</a>

<a class="tab-btn" data-tab="Donor/Volunteer Management System">
    <i class="bi bi-heart"></i>
    <span class="sidebar-text">Donor/Volunteer</span>
</a>

<a class="tab-btn" data-tab="Donation Module">
    <i class="bi bi-cash-coin"></i>
    <span class="sidebar-text">Donation Module</span>
</a>

<a class="tab-btn" data-tab="Donation Box Module">
    <i class="bi bi-box"></i>
    <span class="sidebar-text">Donation Box</span>
</a>

<a class="tab-btn" data-tab="Employee Management System">
    <i class="bi bi-people"></i>
    <span class="sidebar-text">Employee Management System</span>
</a>

<a class="tab-btn" data-tab="Timesheet System">
    <i class="bi bi-clock"></i>
    <span class="sidebar-text">Timesheet System</span>
</a>

<a class="tab-btn" data-tab="Leave Management System">
    <i class="bi bi-calendar-x"></i>
    <span class="sidebar-text">Leave Management</span>
</a>

<a class="tab-btn" data-tab="Visitor Management System">
    <i class="bi bi-person-badge"></i>
    <span class="sidebar-text">Visitor Management</span>
</a>

<a class="tab-btn" data-tab="Vendor Management System">
    <i class="bi bi-truck"></i>
    <span class="sidebar-text">Vendor Management</span>
</a>

<a class="tab-btn" data-tab="Event Management System">
    <i class="bi bi-calendar-event"></i>
    <span class="sidebar-text">Event Management</span>
</a>

<a class="tab-btn" data-tab="Request Management System">
    <i class="bi bi-clipboard-check"></i>
    <span class="sidebar-text">Request Management</span>
</a>

<a class="tab-btn" data-tab="Inventory Management System">
    <i class="bi bi-boxes"></i>
    <span class="sidebar-text">Inventory Management</span>
</a>

<a class="tab-btn" data-tab="Asset Management System">
    <i class="bi bi-pc-display"></i>
    <span class="sidebar-text">Asset Management</span>
</a>

<a class="tab-btn" data-tab="Fleet Management System">
    <i class="bi bi-truck"></i>
    <span class="sidebar-text">Fleet Management</span>
</a>

<a class="tab-btn" data-tab="Financial Asset Module">
    <i class="bi bi-graph-up"></i>
    <span class="sidebar-text">Financial Asset</span>
</a>

<a class="tab-btn" data-tab="Expense Module">
    <i class="bi bi-receipt"></i>
    <span class="sidebar-text">Expense Module</span>
</a>

<a class="tab-btn" data-tab="Medical Module">
    <i class="fa-solid fa-syringe"></i>
    <span class="sidebar-text">Medical Module</span>
</a>

<a class="tab-btn" data-tab="Rehabilitation Module">
    <i class="bi bi-hand-thumbs-up"></i>
    <span class="sidebar-text">Rehabilitation</span>
</a>

<a class="tab-btn" data-tab="Adoption Module">
    <i class="bi bi-people-fill"></i>
    <span class="sidebar-text">Adoption Module</span>
</a>

<a class="tab-btn" data-tab="Trees Module">
    <i class="bi bi-tree"></i>
    <span class="sidebar-text">Trees Module</span>
</a>

<a class="tab-btn" data-tab="Seeds Module">
    <i class="bi bi-flower1"></i>
    <span class="sidebar-text">Seeds Module</span>
</a>

{% elif not user.is_superuser or allowed_modules %}
    <!-- Non-admin: show only allowed modules -->
    {% for module_name in allowed_modules %}
        <a class="tab-btn" data-tab="{{ module_name }}">{{ module_name }}</a>
    {% endfor %}
{% else %}
<div class="welcome-wrapper">
    <div class="welcome-card">
        <h3>Welcome, {{ user.username }}!</h3>
        <p>You currently do not have admin access.</p>
    </div>
</div>
{% endif %}
</div>

<!-- =============Main Content========== -->
    <div class="content">
<style>
/* --- Desktop Layout --- */
.hero-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #e8f4ff;
    padding: 50px 60px;
    border-radius: 12px;
    gap: 40px;
}

/* LEFT */
.hero-content {
    flex: 1.2;
}
.hero-title {
    font-size: 48px;
    font-weight: 800;
    color: #1e3a8a;
    margin-bottom: 15px;
}
.hero-subtitle {
    font-size: 20px;
    font-weight: 500;
    margin-bottom: 20px;
}
.hero-description {
    font-size: 17px;
    line-height: 1.7;
    max-width: 580px;
    color: #4b5563;
}
/* RIGHT IMAGE */
.hero-image {
    flex: 1;
    display: flex;
    justify-content: center;
}
.hero-image img {
    width: 100%;
    max-width: 480px;
    border-radius: 20px;
    object-fit: cover;
}
/* --- Responsive Tablet (768px‚Äì1024px) --- */
@media (max-width: 1024px) {
    .hero-banner {
        padding: 40px;
        gap: 25px;
    }

    .hero-title {
        font-size: 40px;
    }

    .hero-image img {
        max-width: 380px;
    }
}
/* --- Mobile Responsive (< 768px) --- */
@media (max-width: 768px) {
    .hero-banner {
        flex-direction: column;
        text-align: center;
        padding: 35px 20px;
    }

    .hero-title {
        font-size: 32px;
    }

    .hero-description {
        max-width: 100%;
        font-size: 16px;
    }

    .hero-image img {
        max-width: 90%;
        margin-top: 20px;
    }
}

/* Small phones (< 480px) */
@media (max-width: 480px) {
    .hero-title {
        font-size: 28px;
    }

    .hero-description {
        font-size: 15px;
    }

    .hero-image img {
        max-width: 100%;
    }
}
/* Apply header styles only on mobile/tablet screens */
@media (max-width: 768px) {
    .mobile-header {
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;                   /* FIXED HEIGHT */
          background: linear-gradient(135deg, #012a1d 0%, #09e6c1 100%);
        color: white;
        display: flex;
        align-items: center;            /* Vertical center */
        justify-content: space-between;
        padding: 0 15px;
        box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.1);
        z-index: 9999;
    }
    .mobile-header h1 {
        font-size: 20px;                /* Fixed Title Size */
        margin: 0;
        font-weight: 600;
        white-space: nowrap;            /* Prevent text wrapping */
    }
    .menu-toggle {
        background: none;
        border: none;
        font-size: 26px;                /* Fixed icon size */
        color: white;
    }
}
@media (min-width: 769px) {
    .mobile-header {
        display: none;
    }
}
</style>
 <div class="tab-content active" id="default-user">
  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="hero-content">
      <h1 class="hero-title">Welcome to Your Dashboard üëã</h1>
      <p class="hero-subtitle">Your personal control center</p>
      <p class="hero-description">
        From managing your profile to customizing your settings, your dashboard gives you quick access to everything you need to stay in control and productive.
      </p>
    </div>
    <div class="hero-image">
   <img src="{% static 'images/home.png' %}" alt="Dashboard Illustration">
    </div>
  </div>
</div>

<!-- ----------- MDM (Master Data)------------------ -->
 <div class="tab-content"  id="mdm">
  <div class="card border-0">
    <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Master Data</h4>
    </div>
<!-- ------------Lookup type table----------- -->
    <div class="card-body">
      <h5 style="color:#1b5e20">Category/Lookup Type</h5>
<div class="search-container d-flex align-items-center">
  <form method="GET" action="{% url 'search_lookup_type' %}"  class="d-flex align-items-center w-100">
    <input type="text"name="lookup_query" data-target="Lookup" class="form-control live-search search-input me-2"placeholder="üîç Search..."value="{{ lookup_query|default:'' }}">
  </form>
</div>
<style>
/* üåø Modern underline input */
.search-input {
  border: none;
  border-bottom: 2px solid #28a745; /* success green line */
  border-radius: 0;
  background-color: transparent;
  transition: all 0.3s ease;
  padding: 8px 10px;
}

.search-input:focus {
  outline: none;
  box-shadow: none;
  border-bottom-color: #1e7e34; /* darker green when focused */
}

/* ü™Ñ Match buttons cleanly */
.search-btn {
  border-radius: 8px;
}
</style>
  {% if lookup_page_obj %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
              <th>Actions</th>
              <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="2">Type Name<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="3">Created By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="5">Created On<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="6">Updated By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="7">Updated On<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="8">is Deleted<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="9">Deleted On<span class="sort-icon">‚¨ç</span></th>
        </tr>
                <tr class="column-search-row">
  <td>
    <div class="d-flex justify-content-between">
{% if permissions.can_add %}
 <a href="/lookup_type_create/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"><i class="fa-solid fa-plus"></i></a>
{% endif %}  
{% if permissions.can_add %}
<form method="GET" action="{% url 'search_lookup_type' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="lookup_query" value="{{ lookup_query }}">
        <input type="hidden" name="download" value="1">
        <button type="submit"style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;"><i class="bi bi-download"></i></button>
    </form>
{% endif %}    
</div>
</td>
    <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        </tr>
      </thead>
      <tbody id="Lookup">
{% for lt in lookup_page_obj %}
        <tr>
          <!-- <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if permissions.can_edit %}
              <a href="{% url 'edit_lookup_type' lt.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i></a>
              {% endif %}
              {% if permissions.can_delete %} 
<form action="{% url 'delete_lookup_type' lt.id %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;
"onclick="return confirm('Are you sure you want to deactivate this Lookup Type?')"><i class="bi bi-trash"></i></button>
              </form>
              {% endif %}
            </div>
          </td> -->
          <td>
  <div class="d-inline-flex align-items-center gap-1">

    {% if not lt.is_deleted %}
      {% if permissions.can_edit %}
        <a href="{% url 'edit_lookup_type' lt.id %}"
           class="btn-sm p-1"
           style="font-size: 15px; color:black; text-decoration: none;">
          <i class="bi bi-pencil-square"></i>
        </a>
      {% endif %}

      {% if permissions.can_delete %}
        <form action="{% url 'delete_lookup_type' lt.id %}"
              method="POST"
              class="d-inline m-0 p-0">
          {% csrf_token %}
          <button type="submit"
                  class="btn-sm p-1"
                  style="font-size: 15px; color:black; background-color: transparent;"
                  onclick="return confirm('Are you sure you want to deactivate this Lookup Type?')">
            <i class="bi bi-trash"></i>
          </button>
        </form>
      {% endif %}
    {% else %}
      <span class="badge bg-secondary">Deactivated</span>
    {% endif %}

  </div>
</td>
                <td>{{ lt.formatted_id }}</td>
                <td>{{ lt.type_name }}</td>
                <td>{{ lt.created_by }}</td>
                <td>{{ lt.created_date|date:"d M Y, h:i A" }}</td>
                <td>{{ lt.updated_by }}</td>
                <td>{{ lt.updated_date|date:"d M Y, h:i A" }}</td>
<td>
    {% if lt.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
<td>{{ lt.deleted_by }}</td>
                <td>{{ lt.deleted_at|date:"d M Y, h:i A" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="12">No users found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% elif lookup_query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ query }}</strong>".</p>
      {% else %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
                <th>Actions</th>
              <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="2">Type Name<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="3">Created By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="5">Created On<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="6">Updated By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="7">Updated On<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="8">is Deleted<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="10">Deleted On<span class="sort-icon">‚¨ç</span></th>
        </tr>
        <tr class="column-search-row">
  <td>
   <div class="d-flex justify-content-between">
 {% if permissions.can_add %}
 <a href="/lookup_type_create/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"> <i class="fa-solid fa-plus"></i> </a>
{% endif %}
{% if permissions.can_add %}
<form method="GET" action="{% url 'search_lookup_type' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="lookup_query" value="{{ lookup_query }}">
        <input type="hidden" name="download" value="1">
        <button type="submit"style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;"><i class="bi bi-download"></i> </button>
    </form>
{% endif %}    
</div>
</td>
    <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
</tr> 
      </thead>
      <tbody id="Lookup">

   {% for lt in lookup_page_obj %}
        <tr>
          <!-- <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if permissions.can_edit %}
              <a href="{% url 'edit_lookup_type' lt.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;"> <i class="bi bi-pencil-square"></i></a>
              {% endif %}
              {% if permissions.can_delete %}
              <form action="{% url 'delete_lookup_type' lt.id %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this Lookup Type?')">
                  <i class="bi bi-trash"></i></button>
              </form>
              {% endif %}
            </div>
          </td> -->
          <td>
  <div class="d-inline-flex align-items-center gap-1">

    {% if not lt.is_deleted %}
      {% if permissions.can_edit %}
        <a href="{% url 'edit_lookup_type' lt.id %}"
           class="btn-sm p-1"
           style="font-size: 15px; color:black; text-decoration: none;">
          <i class="bi bi-pencil-square"></i>
        </a>
      {% endif %}

      {% if permissions.can_delete %}
        <form action="{% url 'delete_lookup_type' lt.id %}"
              method="POST"
              class="d-inline m-0 p-0">
          {% csrf_token %}
          <button type="submit"
                  class="btn-sm p-1"
                  style="font-size: 15px; color:black; background-color: transparent;"
                  onclick="return confirm('Are you sure you want to deactivate this Lookup Type?')">
            <i class="bi bi-trash"></i>
          </button>
        </form>
      {% endif %}
    {% else %}
      <span class="badge bg-secondary">Deactivated</span>
    {% endif %}

  </div>
</td>
                <td>{{ lt.formatted_id }}</td>
                <td>{{ lt.type_name }}</td>
                <td>{{ lt.created_by }}</td>
                <td>{{ lt.created_date|date:"d-m-Y H:i" }}</td>
                <td>{{ lt.updated_by }}</td>
                <td>{{ lt.updated_date|date:"d-m-Y H:i" }}</td>
<td>
    {% if lt.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
<td>{{ lt.deleted_by }}</td>

                <td>{{ lt.deleted_at|date:"d-m-Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="12">No users found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
<!-- ‚úÖ Scroll CSS -->
<style>
.scrollable-table {
  overflow-y: auto;
  overflow-x: auto; /* Horizontal scroll */
}
table th, table td {
  white-space: nowrap; /* Prevent wrapping */
}
.table thead th {
  position: sticky;
  top: 0;
  background-color: #e9f2ff;
  z-index: 5;
}
</style>
      {% endif %}
    </div>
<!-- ‚úÖ LookupType Pagination Controls -->
<div class="pagination-container text-center">
  {% if lookup_page_obj.has_previous %}
      <a href="?lt_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
      <a href="?lt_page={{ lookup_page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}
  <!-- Page Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="ltPageSelect" class="fw-bold me-1">Page</label>
    <select 
      name="lt_page" id="ltPageSelect"class="form-select form-select-sm d-inline-block w-auto"onchange="this.form.submit()">
      {% for p in lookup_page_obj.paginator.page_range %}
        <option value="{{ p }}" {% if p == lookup_page_obj.number %}selected{% endif %}>{{ p }}</option>
      {% endfor %}
    </select>
    <span class="fw-bold">of {{ lookup_page_obj.paginator.num_pages }}</span>
  </form>
  {% if lookup_page_obj.has_next %}
      <a href="?lt_page={{ lookup_page_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
      <a href="?lt_page={{ lookup_page_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>
<!-- ------------Lookup table----------- -->
   <div class="card-body">
      <h5 style="color:#1b5e20" >Subcategory/Lookup Table</h5>
    <div class="search-container">
  <form method="GET" action="{% url 'search_lookup_table' %}" class="d-flex align-items-center w-100" role="search">
    <input 
      type="text"name="sub_lookup_query" data-target="LookupType" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ sub_lookup_query|default:'' }}">
  </form>
</div>
 <!-- üìÑ Search Results -->
      {% if sub_lookup_query %}
        <h5>Showing results for: "<span ">{{ sub_lookup_query }}</span>"</h5>
        <hr>
      {% endif %}
      <!-- üßç‚Äç‚ôÇÔ∏è User Table -->
      {% if lookup_table_obj %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
            <th>Actions</th>
            <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="2">Lookup Name <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="3">Lookup Type <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="4">Created By <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="5">Created On <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="6">Updated By <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="7">Updated On <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="9">Is Deleted <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="8">Deleted On<span class="sort-icon">‚¨ç</span></th>
        </tr>
        <tr class="column-search-row">
<td>
      <div class="d-flex justify-content-between">
        {% if permissions.can_add %}
 <a href="/lookup/create/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"><i class="fa-solid fa-plus"></i></a>
{% endif %}
{% if permissions.can_add %}
    <form method="GET" action="{% url 'search_lookup_table' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="sub_lookup_query" value="{{ sub_lookup_query }}">
        <input type="hidden" name="download" value="1">

        <button type="submit" 
                style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;">
            <i class="bi bi-download"></i>
        </button>
    </form>
    {% endif %}
</div>
</td>
           <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
        </tr>
      </thead>
      <tbody id="LookupType">


{% for l in lookup_table_obj %}
            <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if not l.is_deleted %}
              {% if permissions.can_edit %}
              <a href="{% url 'edit_lookup' l.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}

              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_lookup' l.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this Lookup?')"><i class="bi bi-trash"></i></button>
              </form>
              {% endif %}
              {% else %}
                <span class="badge bg-secondary">Deactivated</span>
              {% endif %}
            </div>
          </td>
                <td>{{ l.formatted_id }}</td>
                <td>{{ l.lookup_name }}</td>
                <td>{{ l.lookup_type.type_name }}</td>
                <td>{{ l.created_by }}</td>
                <td>{{ l.created_date|date:"d M Y, h:i A" }}</td>
                <td>{{ l.updated_by }}</td>
                <td>{{ l.updated_date|date:"d M Y, h:i A" }}</td>
<td>
    {% if l.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
                <td>{{ l.deleted_by }}</td>

                <td>{{ l.deleted_at|date:"d M Y, h:i A" }}</td>

        </tr>
        {% empty %}
        <tr><td colspan="12">No Lookups found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% elif query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ query }}</strong>".</p>
      {% else %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
                     <tr>
            <th>Actions</th>
            <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="2">Lookup Name <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="3">Lookup Type <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="4">Created By <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="5">Created On <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="6">Updated By <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="7">Updated On <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="9">Is Deleted <span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
            <th class="sortable" data-col="8">Deleted On<span class="sort-icon">‚¨ç</span></th>

        </tr>
                <tr class="column-search-row">
<td>
    <div class="d-flex justify-content-between">
      {% if permissions.can_add %}
 <a href="/lookup/create/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i>
  </a>
      {% endif %}
{% if permissions.can_add %}
    <form method="GET" action="{% url 'search_lookup_table' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="sub_lookup_query" value="{{ sub_lookup_query }}">
        <input type="hidden" name="download" value="1">

        <button type="submit" 
                style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;">
            <i class="bi bi-download"></i>
        </button>
    </form>
    {% endif %}
</div>
</td>
 <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
        </tr>

      </thead>
      <tbody id="LookupType">
{% for l in lookup_table_obj %}           
 <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if not l.is_deleted %}
              {% if permissions.can_edit %}
              <a href="{% url 'edit_lookup' l.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}

              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_lookup' l.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this Lookup?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
              {% endif %}
              {% else %}
                <span class="badge bg-secondary">Deactivated</span>
              {% endif %}
            </div>
          </td>
                <td>{{ forloop.counter }}</td>
                <td>{{ l.formatted_id }}</td>
                <td>{{ l.lookup_name }}</td>
                <td>{{ l.lookup_type.type_name }}</td>
                <td>{{ l.created_by }}</td>
                <td>{{ l.created_date|date:"d M Y, h:i A" }}</td>
                <td>{{ l.updated_by }}</td>
                <td>{{ l.updated_date|date:"d M Y, h:i A" }}</td>
                <td>{{ l.deleted_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if l.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
                <td>{{ l.deleted_by }}</td>
                <td>{{ l.deleted_at|date:"d M Y, h:i A" }}</td>
                </tr>
        {% empty %}
        <tr><td colspan="12">No Lookups found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% endif %}
    </div>
<!-- ‚úÖ Lookups Pagination Controls -->
<div class="pagination-container text-center">

  {% if lookup_table_obj.has_previous %}
      <a href="?lu_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
      <a href="?lu_page={{ lookup_table_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}

  <!-- Page Info + Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="lookupPageSelect" class="fw-bold me-1">Page</label>

    <select 
      name="lu_page" 
      id="lookupPageSelect" 
      class="form-select form-select-sm d-inline-block w-auto"
      onchange="this.form.submit()"
    >
      {% for page_num in lookup_table_obj.paginator.page_range %}
        <option value="{{ page_num }}" {% if page_num == lookup_table_obj.number %}selected{% endif %}>
          {{ page_num }}
        </option>
      {% endfor %}
    </select>

    <span class="fw-bold">of {{ lookup_table_obj.paginator.num_pages }}</span>
  </form>

  {% if lookup_table_obj.has_next %}
    <a href="?lu_page={{ lookup_table_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
    <a href="?lu_page={{ lookup_table_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}

</div>
</div>
</div>

<!--   üåøüåøüåøüåøüåøüåøüåøüåøüåøüåø All Users Section üåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåøüåø -->
<div class="tab-content" id="user">
  <div class="card border-0">
    
    <!-- üåà Navbar-style Header -->
    <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">All Users</h4>
    </div>

    <div class="card-body">
      <!-- üîç Search Section -->
    <div class="search-container">
<form method="GET" action="{% url 'search_users' %}" class="d-flex align-items-center w-100">
    <input type="hidden" name="active_tab" value="user">
    <input type="text" name="user_query" data-target="users" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ user_query|default:'' }}">
</form>
</div>
 <!-- üìÑ Search Results -->
      {% if query %}
        <h5>Showing results for: "<span ">{{ query }}</span>"</h5>
        <hr>
      {% endif %}

      <!-- üßç‚Äç‚ôÇÔ∏è User Table -->

      {% if user_page_obj %}
  <div class="table-responsive scrollable-table1">
  
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
          <th>Actions</th>
                    <th class="sortable" data-col="2">Role <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="3">Username <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="4">First Name <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="5">Last Name <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="6">Email <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="7">Is Active <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="8">Is Superuser <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="9">Date of join <span class="sort-icon">‚¨ç</span></th>
        </tr>
                
        <tr class="column-search-row">
          <td> 
<form method="GET" action="{% url 'search_users' %}"  style="margin: 0; padding: 0;">
    <input type="hidden" name="active_tab" value="user">
    <input type="hidden" name="user_query" value="{{ user_query }}">
    <input type="hidden" name="download" value="1">

    <button type="submit"
        style="background:none; color:black; cursor:pointer; font-size:22px;">
        <i class="bi bi-download"></i>
    </button>
</form>
</td>
          <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        </tr>

      </thead>
      <tbody id="users">
        {% for user in user_page_obj %}
        <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
              <!-- üìù Edit -->
              <a href="{% url 'edit_user' user.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>

              <!-- üóëÔ∏è Delete -->
              <form method="POST" action="{% url 'delete_user' user.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this user?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </div>
          </td>
<td>
{% if user.userrole and user.userrole.role %}
        {{ user.userrole.role.name }}
    {% else %}
        No Role
    {% endif %}
</td>
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.first_name }}</td>
          <td>{{ user.last_name }}</td>
          <td>{{ user.email }}</td>
          <td>
            {% if user.is_active %}
              <span class="badge1">Active</span>
            {% else %}
              <span class="badge1">Inactive</span>
            {% endif %}
          </td>
          <td>{{ user.is_superuser|yesno:"Yes,No" }}</td>
          <td>{{ user.date_joined }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="12">No users found.</td></tr>
        {% endfor %}
      </tbody id="users">
    </table>
  </form>
</div>
      {% elif query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ query }}</strong>".</p>
      {% else %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
          <th>Actions</th>
          <th class="sortable" data-col="2">Role <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="3">Username <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="4">First Name <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="5">Last Name <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="6">Email <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="7">Is Active <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="8">Is Superuser <span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="9">Date of join <span class="sort-icon">‚¨ç</span></th>
        </tr>
                <tr class="column-search-row">
      <td>
<form method="GET" action="{% url 'search_users' %}" style="margin-left: 10px;"  style="margin: 0; padding: 0;">
    <input type="hidden" name="active_tab" value="user">
    <input type="hidden" name="user_query" value="{{ user_query|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
</form>
</td>
          <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        </tr>
      </thead>
      <tbody>
        {% for user in user_page_obj %}
        <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
              <!-- üìù Edit -->
              <a href="{% url 'edit_user' user.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              <!-- üóëÔ∏è Delete -->
              <form method="POST" action="{% url 'delete_user' user.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this user?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </div>
          </td>
<td>{% if user.userrole and user.userrole.role %}
        {{ user.userrole.role.name }}
    {% else %}
        No Role
    {% endif %}
</td>
<td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.first_name }}</td>
          <td>{{ user.last_name }}</td>
          <td>{{ user.email }}</td>
          <td>
            {% if user.is_active %}
              <span class="badge1">Active</span>
            {% else %}
              <span class="badge1">Inactive</span>
            {% endif %}
          </td>
           <td>{{ user.is_superuser|yesno:"Yes,No" }}</td>
          <td>{{ user.date_joined }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="12">No users found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% endif %}
    </div>

 <!-- ‚úÖ Pagination Controls -->
<div class="pagination-container text-center mt-3">
  {% if user_page_obj.has_previous %}
      <a href="?user_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
    <a href="?user_page={{ user_page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}

  <!-- Page Info + Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="pageSelect" class="fw-bold me-1">Page</label>

    <select 
      name="user_page" 
      id="pageSelect" 
      class="form-select form-select-sm d-inline-block w-auto"
      onchange="this.form.submit()">
      {% for page_num in user_page_obj.paginator.page_range %}
        <option value="{{ page_num }}" {% if page_num == user_page_obj.number %}selected{% endif %}>
          {{ page_num }}
        </option>
      {% endfor %}
    </select>

    <span class="fw-bold">of {{ user_page_obj.paginator.num_pages }}</span>
  </form>

  {% if user_page_obj.has_next %}
    <a href="?user_page={{ user_page_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
    <a href="?user_page={{ user_page_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>
</div>
</div>

<!-- üíÖ Optional: extra subtle styling -->
<style>
  .scrollable-table1 {
  max-height: 500px;
  overflow-y: auto;
  overflow-x: auto;
}
.card {
  border-radius: 12px;
  overflow: hidden;
}
.table thead {
  font-weight: 600;
}
.table td, .table th {
  vertical-align: middle;
}
</style>

<!-- ================Roles================== -->

<div class="tab-content" id="roles">
  <div class="card border-0">
        <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Roles</h4>
    </div>
    <div class="card-body">
<div class="search-container">
<form method="GET" action="{% url 'search_roles' %}" class="d-flex align-items-center w-100" role="search">
<input type="text"  name="query1" data-target="roless" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ query1|default:'' }}">
</form>
</div>
<style>
/* üåø Modern underline input */
.search-input {
width: 35%;
  border: none;
  border-bottom: 2px solid #28a745; /* success green line */
  border-radius: 0;
  background-color: transparent;
  transition: all 0.3s ease;
  padding: 8px 10px;
}

.search-input:focus {
  outline: none;
  box-shadow: none;
  border-bottom-color: #1e7e34; /* darker green when focused */
}

/* ü™Ñ Match buttons cleanly */
.search-btn {
  border-radius: 8px;
}
</style>

      <!-- üßç‚Äç‚ôÇÔ∏è User Table -->
      {% if roles_page_obj %}
<div class="table-responsive">
  <table class="table table-hover table-bordered align-middle">
    <thead>
      <tr>
        <th>Actions</th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Module id <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">Module Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Description <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Role <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Access <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">Add <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Delete <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Edit <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">View <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">Created_by <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">Created On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">Updated By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Updated On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="15">is_deleted <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Deleted On<span class="sort-icon">‚¨ç</span></th>
      </tr>
            <tr class="column-search-row">
       <td>
<div class="d-flex justify-content-between">

    <!-- ‚ûï Add Button (Green Icon Only) -->
    <a href="{% url 'access_control' %}" 
       style="font-size: 24px; color: #16a34a; text-decoration: none;">
        <i class="fa-solid fa-plus"></i>
    </a>

    <!-- ‚¨á Download Button (Black Icon Only) -->
    <form method="GET" action="{% url 'search_roles' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="query1" value="{{ query1 }}">
        <input type="hidden" name="download" value="1">

        <button type="submit" 
                style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;">
            <i class="bi bi-download"></i>
        </button>
    </form>
</div>
</td>
          <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text  " placeholder="Search..."></td>
        <td><input  class="column-search" data-col="17" type="text  " placeholder="Search..."></td>
      </tr>
    </thead>
    <tbody id="roless">
      {% for access in roles_page_obj %}
      <tr>
        <td>
          <div class="d-inline-flex align-items-center gap-1">
            <!-- üìù Edit -->
              {% if not access.is_deleted %}
            <a href="{% url 'edit_access' access.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
              <i class="bi bi-pencil-square"></i>
            </a>

            <!-- üóëÔ∏è Delete -->
            <form method="POST" action="{% url 'delete_user_module_access' access.id %}" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                onclick="return confirm('Are you sure you want to deactivate this User module access?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
            {% else %}
                <span class="badge bg-secondary">Deactivated</span>
            {% endif %}
          </div>
        </td>
        <td>{{ access.id }}</td>
        <td>{{ access.module_id }}</td>
<td>{{ access.module.module_name }}</td>
        <td>{{ access.description }}</td>
        <td>{{ access.name }}</td>
        <td>{{ access.can_access }}</td>
        <td>{{ access.can_add }}</td>
        <td>{{ access.can_delete }}</td>
        <td>{{ access.can_edit }}</td>
          <td>{{ access.can_view }}</td>
          <td>{{ access.created_by }}</td>
          <td>{{ access.created_date|date:"d M Y, h:i A" }}</td>
          <td>{{ access.updated_by }}</td>
          <td>{{ access.updated_date|date:"d M Y, h:i A" }}</td>
          <td>
    {% if access.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ access.deleted_by }}</td>
          <td>{{ access.deleted_at|date:"d M Y, h:i A" }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="11" class="text-center text-muted">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
      {% elif query %}
        <p class="text-danger mt-3">No users found for "<strong>{{ query }}</strong>".</p>
      {% else %}
      <div class="table-responsive">
  <table class="table table-hover table-bordered align-middle">
    <thead>
      <tr>
        <th>Actions</th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Module id <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">Module Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Description <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Role <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Access <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">Add <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Delete <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Edit <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">View <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">Created By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">Created On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">Updated By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Updated On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="15">is_deleted <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Deleted On <span class="sort-icon">‚¨ç</span></th>
      </tr>
                  <tr class="column-search-row">
       <td>
<div class="d-flex justify-content-between">

    <!-- ‚ûï Add Button (Green Icon Only) -->
    <a href="{% url 'access_control' %}" 
       style="font-size: 24px; color: #16a34a; text-decoration: none;">
        <i class="fa-solid fa-plus"></i>
    </a>

    <!-- ‚¨á Download Button (Black Icon Only) -->
    <form method="GET" action="{% url 'search_roles' %}" style="margin: 0; padding: 0;">
        <input type="hidden" name="query1" value="{{ query1 }}">
        <input type="hidden" name="download" value="1">

        <button type="submit" 
                style="background: none; border: none; padding: 0; font-size: 24px; cursor: pointer; color: black;">
            <i class="bi bi-download"></i>
        </button>
    </form>
</div>
</td>
          <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text  " placeholder="Search..."></td>
        <td><input  class="column-search" data-col="17" type="text  " placeholder="Search..."></td>
      </tr>
    </thead>
    <tbody id="roless">
      {% for access in roles_page_obj %}
      <tr>
        <td>
          <div class="d-inline-flex align-items-center gap-1">
              {% if not access.is_deleted %}
            <!-- üìù Edit -->
            <a href="{% url 'edit_access' access.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
              <i class="bi bi-pencil-square"></i>
            </a>

            <!-- üóëÔ∏è Delete -->
            <form method="POST" action="{% url 'delete_user_module_access' access.id %}" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                onclick="return confirm('Are you sure you want to deactivate this User module access?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
{% else %}
                <span class="badge bg-secondary">Deactivated</span>
{% endif %}
          </div>
        </td>
        <td>{{ access.id }}</td>
        <td>{{ access.module_id }}</td>
<td>{{ access.module.module_name }}</td>
        <td>{{ access.description }}</td>
        <td>{{ access.name }}</td>
        <td>{{ access.can_access }}</td>
        <td>{{ access.can_add }}</td>
        <td>{{ access.can_delete }}</td>
        <td>{{ access.can_edit }}</td>
          <td>{{ access.can_view }}</td>
          <td>{{ access.created_by }}</td>
          <td>{{ access.created_date|date:"d M Y, h:i A" }}</td>
          <td>{{ access.updated_by }}</td>
          <td>{{ access.updated_date|date:"d M Y, h:i A" }}</td>
<td>
    {% if access.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ access.deleted_by }}</td>
          <td>{{ access.deleted_at|date:"d M Y, h:i A" }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="11" class="text-center text-muted">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

      {% endif %}
    </div>
 <!-- ‚úÖ Pagination Controls -->
<div class="pagination-container text-center mt-3">
  {% if roles_page_obj.has_previous %}
      <a href="?roles_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
    <a href="?roles_page={{ roles_page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}

  <!-- Page Info + Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="pageSelect" class="fw-bold me-1">Page</label>

    <select 
      name="roles_page" 
      id="pageSelect" 
      class="form-select form-select-sm d-inline-block w-auto"
      onchange="this.form.submit()">
      {% for page_num in roles_page_obj.paginator.page_range %}
        <option value="{{ page_num }}" {% if page_num == roles_page_obj.number %}selected{% endif %}>
          {{ page_num }}
        </option>
      {% endfor %}
    </select>

    <span class="fw-bold">of {{ roles_page_obj.paginator.num_pages }}</span>
  </form>

  {% if roles_page_obj.has_next %}
    <a href="?roles_page={{ roles_page_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
    <a href="?roles_page={{ roles_page_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>
  </div>
</div>
<!-- ----------- Timesheet System------------------ -->

<div class="tab-content" id="Timesheet System">
            <div class="content-header">
                <h1>Timesheet System</h1>
                <p>Manage employee timesheets and work hours</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-clock-history"></i>
                <h2>Timesheet Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Leave Management System------------------ -->

<div class="tab-content" id="Leave Management System">
            <div class="content-header">
                <h1>Leave Management System</h1>
                <p>Manage employee leave requests and balances</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-calendar-x"></i>
                <h2>Leave Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Donor/Volunteer Management System ------------------ -->

<div class="tab-content" id="Donor/Volunteer Management System">
  
  <div id="imagePopup" style="
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  z-index:9999;
  align-items:center;
  justify-content:center;
">

  <div style="
    background:#fff;
    padding:18px;
    border-radius:10px;
    max-width:90%;
    max-height:90%;
    position:relative;
    text-align:center;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
  ">

    <!-- ‚ùå Close -->
    <span
      onclick="closeImagePopup()"
      style="
        position:absolute;
        top:8px;
        right:12px;
        cursor:pointer;
        font-size:22px;
        color:#444;">‚úñ</span>

    <!-- üîπ Title -->
    <div id="imageTitle"
         style="
           font-weight:600;
           font-size:14px;
           color:#0c6d34;
           margin-bottom:10px;">
    </div>

    <!-- üñº Image -->
    <img id="popupImage"
         style="
           max-width:100%;
           max-height:65vh;
           object-fit:contain;
           border-radius:6px;">

    <!-- ‚èÆ ‚è≠ Controls -->
    <div style="margin-top:12px; display:flex; justify-content:center; gap:15px;">
      <button class="nav-btn" onclick="prevImg()">‚ü™</button>
<button class="nav-btn" onclick="nextImg()">‚ü´</button>
    </div>
  </div>
</div>
<style>
.nav-btn {
  background:#0c6d34;
  color:#fff;
  border:none;
  
  padding:8px 16px;
  border-radius:20px;
  font-size:13px;
  cursor:pointer;
  transition:all 0.2s ease;
}

.nav-btn:hover {
  background:#095528;
  transform:translateY(-1px);
}

.nav-btn:disabled {
  background:#ccc;
  cursor:not-allowed;
}
</style>

 <div class="card border-0">
        <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">All Donors and Volunteers</h4>
    </div>

    <div class="card-body">
  <div class="search-container">
  <form method="GET" action="{% url 'search_donor_volunteer' %}" class="d-flex align-items-center w-100" role="search">
    <input type="text" name="q" data-target="donorvolunteer" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ query|default:'' }}">
    {% if query %}
      <a href="{% url 'search_donor_volunteer' %}" class="btn btn-outline-secondary ms-2 search-btn"></a>
    {% endif %}
  </form>
</div>
      {% if query2 %}
        <h5>Showing results for: "<span ">{{ query2 }}</span>"</h5>
        <hr>
      {% endif %}
      {% if page_obj %}
  <div class="table-responsive">
  <table class="table table-hover table-bordered align-middle paginated-table">
    <thead>
    <tr>
        <th>Action</th>
                <th class="sortable" data-col="28">id prooof <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Person Type <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">First Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Middle Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Last Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Gender <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">DOB <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Contact <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Email <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">Donor Box ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">ID Type <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">ID Number <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">House Number <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Building Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="15">Landmark <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Area <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="17">City <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="18">State <span class="sort-icon ">‚¨ç</span></th>
        <th class="sortable" data-col="19">Country <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="20">Postal Code <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="21">Native Place <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="22">Native Postal Code <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="23">Created By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="24">Created On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="25">Updated By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="26">Updated On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="28">is_deleted <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Deleted By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="27">Deleted On <span class="sort-icon">‚¨ç</span></th>
      </tr>
            <tr class="column-search-row">
      <td>
<div class="d-flex justify-content-between">
  {% if permissions.can_add %}
 <a href="{% url 'add_donor_volunteer' %}" 
       style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"><i class="fa-solid fa-plus"></i></a>
  {% endif %}
  {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donor_volunteer' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="q" value="{{ query2|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
    </form>
  {% endif %}
</div>
</td>
    <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="20" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="21" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="22" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="23" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="24" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="25" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="26" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="27" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="28" type="text" placeholder="Search..."></td> 
        <td><input  class="column-search" data-col="29" type="text" placeholder="Search..."></td> 
          <td><input  class="column-search" data-col="30" type="text" placeholder="Search..."></td> 
      </tr>
    </thead>
    <tbody id="donorvolunteer">
      <!-- üßæ Paginated Data -->
      {% for donation in page_obj %}
      <tr>
        <td>
          <div class="d-inline-flex align-items-center gap-1">
            {% if not donation.is_deleted %}
           {% if permissions.can_edit %}
            <a href="{% url 'edit_donor' donation.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
              <i class="bi bi-pencil-square"></i>
            </a>
            {% endif %}

            {% if permissions.can_delete %}
            <form method="POST" action="{% url 'delete_donor_volunteer' donation.id %}" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                onclick="return confirm('Are you sure you want to deactivate this donor volunteer?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
            {% endif %}
            {% else %}
                <span class="badge bg-secondary">Deactivated</span>
            {% endif %}
          </div>
        </td>
        <td>
  {% if donation.id_proof_image or donation.pan_card_image %}
    <span
      style="cursor:pointer;font-size:17px;"
      title="View ID / PAN"
      onclick="openImagesPopup(
        '{% if donation.id_proof_image %}{{ donation.id_proof_image.url }}{% endif %}',
        '{% if donation.pan_card_image %}{{ donation.pan_card_image.url }}{% endif %}'
      )">
      <i class="fa-solid fa-eye"></i>
    </span>
  {% else %}
    ‚Äî
  {% endif %}
</td>
        <td>{{ donation.id }}</td>
        <td>{{ donation.person_type }}</td>
        <td>{{ donation.first_name }}</td>
        <td>{{ donation.middle_name }}</td>
        <td>{{ donation.last_name }}</td>
        <td>{{ donation.gender }}</td>
        <td>{{ donation.date_of_birth }}</td>
        <td>{{ donation.contact_number }}</td>
        <td>{{ donation.email }}</td>
        <td>{{ donation.donor_box_id }}</td>
        <td>{{ donation.id_type }}</td>
        <td>{{ donation.id_number }}</td>
        <td>{{ donation.house_number }}</td>
        <td>{{ donation.building_name }}</td>
      <td>{{ donation.landmark }}</td>
      <td>{{ donation.area }}</td>
      <td>{{ donation.city }}</td>
      <td>{{ donation.state }}</td>
      <td>{{ donation.country }}</td>
      <td>{{ donation.postal_code }}</td>
      <td>{{ donation.native_place }}</td>
      <td>{{ donation.native_postal_code }}</td>
      <td>{{ donation.created_by }}</td>
      <td>{{ donation.created_at|date:"d M Y, h:i A" }}</td>
      <td>{{ donation.updated_by }}</td>
      <td>{{ donation.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if donation.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
      <td>{{ donation.deleted_by }}</td>
            <td>{{ donation.deleted_at|date:"d M Y, h:i A" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="14" class="text-center text-muted py-4">No donors found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
      {% elif query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ query2 }}</strong>".</p>
      {% else %}
<div class="table-responsive">
  <table class="table table-hover table-bordered align-middle paginated-table">
    <thead>
      <tr>
        <th>Action</th>
                <th class="sortable" data-col="28">id prooof <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Person Type <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">First Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Middle Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Last Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Gender <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">DOB <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Contact <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Email <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">Donor Box ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">ID Type <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">ID Number <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">House Number <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Building Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="15">Landmark <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Area <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="17">City <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="18">State <span class="sort-icon ">‚¨ç</span></th>
        <th class="sortable" data-col="19">Country <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="20">Postal Code <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="21">Native Place <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="22">Native Postal Code <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="23">Created By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="24">Created On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="25">Updated By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="26">Updated On <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="28">is_deleted <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="27">Deleted By <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="27">Deleted On<span class="sort-icon">‚¨ç</span></th>
        <th></th>
      </tr>
            <!-- üîç Filter Row -->
      <tr class="column-search-row">
      <td>
  <div class="d-flex justify-content-between">
    {% if permissions.can_add %}
 <a href="{% url 'add_donor_volunteer' %}" 
       style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i>
  </a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donor_volunteer' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="q" value="{{ query2|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
    </form>
    {% endif %}
</div>
</td>
        <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="20" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="21" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="22" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="23" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="24" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="25" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="26" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="27" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="28" type="text" placeholder="Search..."></td> 
        <td><input  class="column-search" data-col="29" type="text" placeholder="Search..."></td> 
      </tr>
    </thead>
    <tbody id="donorvolunteer">

      {% for donation in page_obj %}
      <tr>
        <td>
          <div class="d-inline-flex align-items-center gap-1">
            {% if not donation.is_deleted %}
            {% if permissions.can_edit %}
            <a href="{% url 'edit_donor' donation.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
              <i class="bi bi-pencil-square"></i>
            </a>
            {% endif %}

            {% if permissions.can_delete %}
            <form method="POST" action="{% url 'delete_donor_volunteer' donation.id %}" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                onclick="return confirm('Are you sure you want to deactivate this donor volunteer?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
            {% endif %}
                <span class="badge bg-secondary">Deactivated</span>
            {% endif %}
          </div>
        </td>
        <td>
  {% if donation.id_proof_image or donation.pan_card_image %}
    <span
      style="cursor:pointer;font-size:17px;"
      title="View ID / PAN"
      onclick="openImagesPopup(
        '{% if donation.id_proof_image %}{{ donation.id_proof_image.url }}{% endif %}',
        '{% if donation.pan_card_image %}{{ donation.pan_card_image.url }}{% endif %}'
      )">
      <i class="fa-solid fa-eye"></i>
    </span>
  {% else %}
    ‚Äî
  {% endif %}
</td>
        <td>{{ donation.id }}</td>
        <td>{{ donation.person_type }}</td>
        <td>{{ donation.first_name }}</td>
        <td>{{ donation.middle_name }}</td>
        <td>{{ donation.last_name }}</td>
        <td>{{ donation.gender }}</td>
        <td>{{ donation.date_of_birth }}</td>
        <td>{{ donation.contact_number }}</td>
        <td>{{ donation.email }}</td>
        <td>{{ donation.donor_box_id }}</td>
        <td>{{ donation.id_type }}</td>
        <td>{{ donation.id_number }}</td>
        <td>{{ donation.house_number }}</td>
        <td>{{ donation.building_name }}</td>
      <td>{{ donation.landmark }}</td>
      <td>{{ donation.area }}</td>
      <td>{{ donation.city }}</td>
      <td>{{ donation.state }}</td>
      <td>{{ donation.country }}</td>
      <td>{{ donation.postal_code }}</td>
      <td>{{ donation.native_place }}</td>
      <td>{{ donation.native_postal_code }}</td>
      <td>{{ donation.created_by }}</td>
      <td>{{ donation.created_at|date:"d M Y, h:i A" }}</td>
      <td>{{ donation.updated_by }}</td>
      <td>{{ donation.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if donation.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
      <td>{{ donation.deleted_by }}</td>
      <td>{{ donation.deleted_at|date:"d M Y, h:i A" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="14" class="text-center text-muted py-4">No donors found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<style>
.table-responsive::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.table-responsive::-webkit-scrollbar-thumb {
  background-color: #007bff;
  border-radius: 10px;
}
.table-responsive::-webkit-scrollbar-track {
  background-color: #f1f1f1;
}
.paginated-table th,
.paginated-table td {
  text-align: center;
  vertical-align: middle;
  white-space: nowrap;
}
</style>
      {% endif %}
    </div>
 <!-- ‚úÖ Pagination Controls -->
<div class="pagination-container text-center mt-3">
  {% if page_obj.has_previous %}
      <a href="?donor_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
    <a href="?donor_page={{ page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}
  <!-- Page Info + Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="pageSelect" class="fw-bold me-1">Page</label>
    <select name="donor_page" id="pageSelect" class="form-select form-select-sm d-inline-block w-auto"onchange="this.form.submit()">
      {% for page_num in page_obj.paginator.page_range %}
        <option value="{{ page_num }}" {% if page_num == page_obj.number %}selected{% endif %}>
          {{ page_num }}
        </option>
      {% endfor %}
    </select>
    <span class="fw-bold">of {{ page_obj.paginator.num_pages }}</span>
  </form>

  {% if page_obj.has_next %}
    <a href="?donor_page={{ page_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
    <a href="?donor_page={{ donor_page_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>
</div>
</div>

<!-- ----------- Visitor Management System ------------------ -->

<div class="tab-content" id="Visitor Management System">
            <div class="content-header">
                <h1>Visitor Management System</h1>
                <p>Manage visitor records and appointments</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-person-badge"></i>
                <h2>Visitor Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Vendor Management System ------------------ -->

<div class="tab-content" id="Vendor Management System">
            <div class="content-header">
                <h1>Vendor Management System</h1>
                <p>Manage vendor information and contracts</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-truck"></i>
                <h2>Vendor Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Event Management System ------------------ -->

<div class="tab-content" id="Event Management System">
            <div class="content-header">
                <h1>Event Management System</h1>
                <p>Manage events and activities</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-calendar-event"></i>
                <h2>Event Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Request Management System------------------ -->

<div class="tab-content" id="Request Management System">
            <div class="content-header">
                <h1>Request Management System</h1>
                <p>Manage various requests and approvals</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-clipboard-check"></i>
                <h2>Request Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Inventory Management System------------------ -->

<div class="tab-content" id="Inventory Management System">
            <div class="content-header">
                <h1>Inventory Management System</h1>
                <p>Manage inventory and stock levels</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-boxes"></i>
                <h2>Inventory Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Asset Management System------------------ -->

<div class="tab-content" id="Asset Management System">
            <div class="content-header">
                <h1>Asset Management System</h1>
                <p>Manage company assets and equipment</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-pc-display"></i>
                <h2>Asset Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>

<!-- ----------- Fleet Management System------------------ -->

<div class="tab-content" id="Fleet Management System">
            <div class="content-header">
                <h1>Fleet Management System</h1>
                <p>Manage vehicle fleet and transportation</p>
            </div>
<div class="placeholder-content">
                <i class="bi bi-truck"></i>
                <h2>Fleet Management Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
</div>
</div>

<!-- ---------Donation box module-------- -->

 <div class="tab-content"  id="Donation Box Module">
  <div class="card border-0">
    <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Donation box (Dan Peti)</h4>
    </div>
<!-- ------------Donation Owner Module----------- -->
    <div class="card-body">
      <h5 style="color:#1b5e20">Danpeti Donation</h5>
<div class="search-container d-flex align-items-center">
  <form method="GET" action="{% url 'search_donation_payment' %}" class="d-flex align-items-center w-100">
    <input type="text" name="payments_query" data-target="donation" class="form-control live-search search-input me-2"placeholder="üîç Search..."value="{{ payments_query|default:'' }}">
  </form>
</div>
      <!-- üßç‚Äç‚ôÇÔ∏è User Table -->
      {% if payments_page_obj %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
              <th>Actions</th>
              <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="1">Receipt ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="2">Owner Name <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="3">Donation Box <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="4">Amount <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="5">Payment Method <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="6">Opened by <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="7">Received by <span class="sort -icon">‚¨ç</span></th>
              <th class="sortable" data-col="8">I Witness <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="9">Bank Name <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="10">Branch  <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="11">Transaction id <span class="sort-icon">‚¨ç</span></th>

              <th class="sortable" data-col="12">Created By <span class="sort -icon">‚¨ç</span></th>
              <th class="sortable" data-col="13">Created On <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="14">Updated By <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="15">Updated On <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="16">Deleted By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="17">is_deleted <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="18">Deleted On<span class="sort-icon">‚¨ç</span></th>
        </tr>
                <tr class="column-search-row">
  <td>
<div class="d-inline-flex align-items-center gap-1">
{% if permissions.can_add %}
  <a href="/select_donation_box/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"><i class="fa-solid fa-plus"></i></a>
  {% endif %}
  {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation_payment' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="payments_query" value="{{ payments_query|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;"><i class="bi bi-download"></i></button>
    </form>
    {% endif %}
    </div>
</td>
    <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td> 
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text " placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
     <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>
</tr>
      </thead>
      <tbody id="donation">
        
        {% for owner in payments_page_obj.object_list %}
        <tr>
            <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if not owner.is_deleted %}
{% if permissions.can_edit %}
              <a href="{% url 'edit_box_payment' owner.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}
              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_box_payment' owner.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this donation owner?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>

{% if owner.verified %}
    <a href="{% url 'donation_payment_receipt_view' owner.id %}"
       style="font-size: 17px;"
       title="View Receipt">
        <i class="fa-solid fa-eye"></i>
    </a>
{% endif %}

{% if request.user.is_superuser %}
    {% if owner and owner.id %}
        {% if owner.verified %}
            <i class="fa-solid fa-circle-check"
               style="font-size: 17px; color:#16a34a;"
               title="Verified by Admin"></i>
        {% else %}
            <a href="{% url 'verify_payment' owner.id %}"
               onclick="return confirm('Verify this donation?')">
                <i class="fa-regular fa-circle-check"
                   style="font-size: 17px; color:red;"
                   title="Click to Verify"></i>
            </a>
        {% endif %}
    {% else %}
        <span class="text-muted" title="No payment found">‚Äî</span>
    {% endif %}
{% endif %}
              {% endif %}
              {% else %}
                <span class="badge1" style="font-size: 14px;"><i class="fa-solid fa-ban" title="Deactivate"></i></span>
              {% endif %}

            </div>
          </td>
          <td>{{ owner.id }}</td>
                    <td>{{ owner.receipt_id }}</td>
<td>{{ owner.owner.first_name }} {{ owner.owner.last_name }}</td>
          <td>
            {% if owner.donation_box %}
              {{ owner.donation_box.donation_name }} (ID: {{ owner.donation_box.donation_id }})
            {% else %}
              <span class="text-muted">N/A</span>
            {% endif %}
          </td>
          <td>‚Çπ{{ owner.amount }}</td>
          <td>{{ owner.payment_method }}</td>
          <td>{{ owner.opened_by }}</td>
          <td>{{ owner.verified_by }}</td>
          <td>{{ owner.i_witness }}</td>
          <td>{{ owner.name_of_bank }}</td>
          <td>{{ owner.branch }}</td>
          <td>{{ owner.created_by }}</td>
          <td>{{ owner.created_at|date:"d M Y, h:i A" }}</td>
          <td>{{ owner.updated_by }}</td>
          <td>{{ owner.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if owner.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ owner.deleted_by }}</td>
          <td>{{ owner.deleted_at|date:"d M Y, h:i A" }}</td>
        </tr>
        {% empty %}
      <tr><td colspan="10" class="text-muted py-4">No donation payment owner found.</td></tr>
        {% endfor %}

      </tbody>
    </table>

</div>
      {% elif payments_query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ query }}</strong>".</p>
      {% else %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
         <tr>
              <th>Actions</th>
              <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="1">Receipt ID <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="2">Owner Name <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="3">Donation Box <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="4">Amount <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="5">Payment Method <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="6">Opened by <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="7">Received by <span class="sort -icon">‚¨ç</span></th>
              <th class="sortable" data-col="8">I Witness <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="9">Bank Name <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="10">Branch  <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="11">Transaction id <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="12">Created By <span class="sort -icon">‚¨ç</span></th>
              <th class="sortable" data-col="13">Created On <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="14">Updated By <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="15">Updated On <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="16">Deleted By<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="17">is_deleted <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="18">Deleted On<span class="sort-icon">‚¨ç</span></th>
        </tr>
                <tr class="column-search-row">  
      <td>
  <div class="d-inline-flex align-items-center gap-1">
    {% if permissions.can_add %}
  <a href="/add_donation_payment/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i>
  </a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation_payment' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="payments_query" value="{{ payments_query|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
    </form>
    {% endif %}
  </div>
</td>
          <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td> 
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text " placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>

        </tr> 
      </thead>
      <tbody id="donation">

        {% for owner in payments_page_obj.object_list %}
        <tr>
            <td>
            <div class="d-inline-flex align-items-center gap-1">
              {% if not owner.is_deleted %}
             {% if permissions.can_edit %}
              <a href="{% url 'edit_box_payment' owner.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}
              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_box_payment' owner.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this donation owner?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>

{% if owner.verified %}
    <a href="{% url 'donation_payment_receipt_view' owner.id %}"
       style="font-size: 17px;"
       title="View Receipt">
        <i class="fa-solid fa-eye"></i>
    </a>
{% endif %}{% if request.user.is_superuser %}
    {% if owner and owner.id %}
        {% if owner.verified %}
            <i class="fa-solid fa-circle-check"
               style="font-size: 17px; color:#16a34a;"
               title="Verified by Admin"></i>
        {% else %}
            <a href="{% url 'verify_payment' owner.id %}"
               onclick="return confirm('Verify this donation?')">
                <i class="fa-regular fa-circle-check"
                   style="font-size: 17px; color:red;"
                   title="Click to Verify"></i>
            </a>
        {% endif %}
    {% else %}
        <span class="text-muted" title="No payment found">‚Äî</span>
    {% endif %}
{% endif %}
              {% endif %}
              {% else %}
<span class="badge1" style="font-size: 14px;"><i class="fa-solid fa-ban" title="Deactivate"></i></span>
              {% endif %}
            </div>
          </td>
          <td>{{ owner.id }}</td>
                              <td>{{ owner.receipt_id }}</td>
<td>{{ owner.owner.first_name }} {{ owner.owner.last_name }}</td>
          <td>
            {% if owner.donation_box %}
              {{ owner.donation_box.donation_name }} (ID: {{ owner.donation_box.donation_id }})
            {% else %}
              <span class="text-muted">N/A</span>
            {% endif %}
          </td>
          <td>‚Çπ{{ owner.amount }}</td>
          <td>{{ owner.payment_method }}</td>
          <td>{{ owner.opened_by }}</td>
          <td>{{ owner.verified_by }}</td>
          <td>{{ owner.i_witness }}</td>
           <td>{{ owner.name_of_bank }}</td>
          <td>{{ owner.branch }}</td>
          <td>{{ owner.created_by }}</td>
          <td>{{ owner.created_at|date:"d M Y, h:i A" }}</td>
          <td>{{ owner.updated_by }}</td>
          <td>{{ owner.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if owner.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ owner.deleted_by }}</td>
          <td>{{ owner.deleted_at|date:"d M Y, h:i A" }}</td>
        </tr>
        {% empty %}
      <tr><td colspan="10" class="text-muted py-4">No donation payment owner found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
{% endif %}
</div>
    
<!-- ‚úÖ Donation Payment Pagination Controls -->
<div class="pagination-container text-center">
  {% if payments_page_obj.has_previous %}
      <a href="?payments_page=1&payments_query={{ payments_query }}" 
         class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>

      <a href="?payments_page={{ payments_page_obj.previous_page_number }}&payments_query={{ payments_query }}" 
         class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}

  <!-- Page Dropdown -->
  <form method="get" class="d-inline-block pagination-form">

    <input type="hidden" name="payments_query" value="{{ payments_query }}"/>

    <label for="dpPageSelect" class="fw-bold me-1">Page</label>

    <select 
      name="payments_page"
      id="dpPageSelect"
      class="form-select form-select-sm d-inline-block w-auto"
      onchange="this.form.submit()">

      {% for p in payments_page_obj.paginator.page_range %}
        <option value="{{ p }}" {% if p == payments_page_obj.number %}selected{% endif %}>
          {{ p }}
        </option>
      {% endfor %}
    </select>

    <span class="fw-bold">of {{ payments_page_obj.paginator.num_pages }}</span>
  </form>
  {% if payments_page_obj.has_next %}
      <a href="?payments_page={{ payments_page_obj.next_page_number }}&payments_query={{ payments_query }}" 
         class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>

      <a href="?payments_page={{ payments_page_obj.paginator.num_pages }}&payments_query={{ payments_query }}" 
         class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>

<!-- ------------Donation Box----------- -->
<!-- QR Code Popup -->
<div id="qrModal"
     style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999;">

  <div style="
      background:#fff;
      padding:20px 20px 25px;
      border-radius:12px;
      width:40%;
      height: 55%;
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%);
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);">

    <!-- Close -->
    <span onclick="closeQrPopup()"
          style="position:absolute; right:12px; top:8px; cursor:pointer; font-size:22px;">
      √ó
    </span>

    <!-- Title -->
    <h5 style="margin-bottom:10px; color: #095528;">QR Code</h5>

    <!-- QR Image -->
    <img id="qrImage"src=""style="width:200%; max-width:300px; margin-bottom:12px;">

    <!-- Info -->
    <div style="font-size:14px; text-align:left; margin-bottom:12px;">
      <div><strong>Key ID:</strong> <span id="key_id"></span></div>
      <div><strong>Donation ID:</strong> <span id="donation_id"></span></div>
    </div>

    <!-- Download -->
    <a id="qrDownload"
       href="#"
       download
       title="Download QR Code"
       style="
         display:inline-flex;
         align-items:center;
         gap:6px;
         font-size:14px;
         text-decoration:none;
         color:#000;
       ">
      ‚¨á Download
    </a>

  </div>
</div>

   <div class="card-body">
      <h5 style="color:#1b5e20" >Donation Box</h5>
      <!-- üîç Search Section -->
    <div class="search-container">
  <form method="GET" action="{% url 'search_donation_box' %}" class="d-flex align-items-center w-100" role="search">
    <input type="text" name="box_query" data-target="boxx" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ box_query|default:'' }}">
  </form>
</div>
    {% if box_page_obj %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
          <th>Actions</th>
                  <th class="sortable" data-col="1">Danpeti ID<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="2">OR Code<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="3">Key ID<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="4">Box Size<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="5">Location<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="6">Status<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="7">Created By<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="8">Created On<span class="sort-icon">‚¨ç</span></th>
                    <th class="sortable" data-col="10">Updated By<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="9">Updated On<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="12">Is Deleted<span class="sort-icon">‚¨ç</span></th>
                    <th class="sortable" data-col="11">Deleted By<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="11">Deleted At<span class="sort-icon">‚¨ç</span></th>
        </tr>
          <tr class="column-search-row">
  <td>
  <div class="d-inline-flex align-items-center gap-1">
    {% if permissions.can_add %}
  <a href="/add_donation_box/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i>
  </a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation_box' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="box_query" value="{{ box_query|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
    </form>
    {% endif %}
  </div>
</td>
                  <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
        </tr> 
      </thead>
      <tbody id="boxx"> 
        {% for box in box_page_obj  %}
        <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
                            {% if not box.is_deleted %}
              {% if permissions.can_edit %}
              <a href="{% url 'edit_donation_box' box.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}
              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_donation_box' box.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this donation box?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
              {% endif %}
              {% else %}
                              <span class="badge bg-secondary">Deactivated</span>
              {% endif %}
            </div>
          </td>
                   <td>{{ box.donation_id }}</td>
<td style="text-align:center;">
  {% if box.qr_code %}
    <span
      onclick="openQrPopup(
        '{{ box.qr_code.url }}',
        '{{ box.key_id }}',
        '{{ box.id }}'
      )"
      title="View QR Code"
      style="cursor:pointer; font-size:17px;">
     <i class="fa-solid fa-eye"></i>
    </span>
  {% else %}
    <span class="text-muted">‚Äî</span>
  {% endif %}
</td>

          <td>{{ box.key_id }}</td>
          <td>{{ box.box_size }}</td>
          <td>{{ box.location }}</td>
          <td>{{ box.status }}</td>
          <td>{{ box.created_by }}</td>
          <td>{{ box.created_at|date:"d M Y, h:i A" }}</td>
                    <td>{{ box.updated_by }}</td>
          <td>{{ box.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if box.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ box.deleted_by }}</td>
          <td>{{ box.deleted_at|date:"d M Y, h:i A" }}</td>
        </tr>
        {% empty %}
      <tr><td colspan="10" class="text-muted py-4">No donation boxes found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% elif box_query %}
        <p class="text-danger mt-3">No data found for "<strong>{{ box_query }}</strong>".</p>
      {% else %}
  <div class="table-responsive scrollable-table1">
    <table class="table table-hover table-bordered align-middle paginated-table">
      <thead class="sticky-top">
        <tr>
          <th>Actions</th>
                  <th class="sortable" data-col="1">Danpeti ID<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="2">OR Code<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="3">Key ID<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="4">Box Size<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="5">Location<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="6">Status<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="7">Created By<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="8">Created On<span class="sort-icon">‚¨ç</span></th>
                    <th class="sortable" data-col="10">Updated By<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="9">Updated On<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="11">Deleted At<span class="sort-icon">‚¨ç</span></th>
          <th class="sortable" data-col="12">Is Deleted<span class="sort-icon">‚¨ç</span></th>
        </tr>
                   <tr class="column-search-row">
  <td>
  <div class="d-inline-flex align-items-center gap-1">
    {% if permissions.can_add %}
  <a href="/add_donation_box/" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i>
  </a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation_box' %}" style="margin: -9px; padding: 0;">
    <input type="hidden" name="box_query" value="{{ box_query|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size: 22px; color: black;">
        <i class="bi bi-download"></i>
    </button>
    </form>
    {% endif %}
  </div>
</td>
           <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="5" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
    <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
        </tr>
        
      </thead>

      <tbody id="boxx">

        {% for box in box_page_obj %}
        <tr>
          <td>
            <div class="d-inline-flex align-items-center gap-1">
                                          {% if not box.is_deleted %}
              {% if permissions.can_edit %}
              <a href="{% url 'edit_donation_box' box.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}
              {% if permissions.can_delete %}
              <form method="POST" action="{% url 'delete_donation_box' box.id %}" class="d-inline m-0 p-0">
                {% csrf_token %}
                <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this donation box?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
              {% endif %}
                   {% else %}
                              <span class="badge bg-secondary">Deactivated</span>
              {% endif %}
            </div>
          </td>
         <td>{{ box.donation_id }}</td>
<td style="text-align:center;">
  {% if box.qr_code %}
    <span
      onclick="openQrPopup(
        '{{ box.qr_code.url }}',
        '{{ box.key_id }}',
        '{{ box.id }}'
      )"
      title="View QR Code"style="cursor:pointer; font-size:17px;">
  <i class="fa-solid fa-eye"></i>
    </span>
  {% else %}
    <span class="text-muted">‚Äî</span>
  {% endif %}
</td>

          <td>{{ box.key_id }}</td>
          <td>{{ box.box_size }}</td>
          <td>{{ box.location }}</td>
          <td>{{ box.status }}</td>
          <td>{{ box.created_by }}</td>
          <td>{{ box.created_at|date:"d M Y, h:i A" }}</td>
                    <td>{{ box.updated_by }}</td>
          <td>{{ box.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if box.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
          <td>{{ box.deleted_by }}</td>
          <td>{{ box.deleted_at|date:"d M Y, h:i A" }}</td>
        </tr>
        {% empty %}
      <tr><td colspan="15" class="text-muted py-4">No donation boxes found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>
      {% endif %}
    </div>
<!-- ‚úÖ Lookups Pagination Controls -->
<div class="pagination-container text-center">

  {% if box_page_obj.has_previous %}
      <a href="?box_page=1&box_query={{ box_query }}" 
         class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>

      <a href="?box_page={{ box_page_obj.previous_page_number }}&box_query={{ box_query }}" 
         class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}

  <!-- Page Dropdown -->
  <form method="get" class="d-inline-block">

    <input type="hidden" name="box_query" value="{{ box_query }}"/>

    <label for="boxPageSelect" class="fw-bold me-1">Page</label>

    <select 
      name="box_page"
      id="boxPageSelect"
      class="form-select form-select-sm d-inline-block w-auto"
      onchange="this.form.submit()">

      {% for p in box_page_obj.paginator.page_range %}
        <option value="{{ p }}" {% if p == box_page_obj.number %}selected{% endif %}>
          {{ p }}
        </option>
      {% endfor %}
    </select>

    <span class="fw-bold">of {{ box_page_obj.paginator.num_pages }}</span>
  </form>

  {% if box_page_obj.has_next %}
      <a href="?box_page={{ box_page_obj.next_page_number }}&box_query={{ box_query }}" 
         class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>

      <a href="?box_page={{ box_page_obj.paginator.num_pages }}&box_query={{ box_query }}" 
         class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}

</div>
</div>
</div>

<!-- --------------START:  DONATION MODULE---------- -->
<div class="tab-content" id="Donation Module">
  <div class="card border-0">
        <div class="card-header  text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">All Donations</h4>
    </div>
    <div class="card-body">
    <div class="search-container">
  <form method="GET" action="{% url 'search_donation' %}" class="d-flex align-items-center w-100" role="search">
    <input type="text" name="q" data-target="alldonations" class="form-control live-search search-input me-2 shadow-none" placeholder="üîç Search..." value="{{ query3|default:'' }}">
  </form>
</div>
      {% if donation_page_obj %}
        <div class="table-responsive">
  <table class="table table-hover table-bordered align-middle paginated-table">
    <thead>
      <tr>
        <th>Action</th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
                <th class="sortable" data-col="1">Receipt ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Donor <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">Address<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Amount declared<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Amount Paid<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Date<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">Category<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Payment Method<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Transaction ID<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">payment_status<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">Check number<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">Place of donation<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">Description<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Bank Name <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">Branch  <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Created By<span class="sort-icon">‚¨ç</span></th>  
        <th class="sortable" data-col="15">Created On<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Updated By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="17">Updated On<span class="sort-icon">‚¨ç</span></th>  
        <th class="sortable" data-col="19">is_deleted<span class="sort-icon">‚¨ç</span></th>
                <th class="sortable" data-col="18">deleted By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="18">Deleted On<span class="sort-icon">‚¨ç</span></th>
                <th class="sortable" data-col="18">Verified By<span class="sort-icon">‚¨ç</span></th>
      </tr>
            <tr class="column-search-row">
      <td>
        <div class="d-flex justify-content-between">
          {% if permissions.can_add %}
    <a href="{% url 'adddonation' %}" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;"><i class="fa-solid fa-plus"></i></a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation' %}" style="margin: -9px; padding: 0;">
      <input type="hidden" name="q" value="{{ query3|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size:22px; color:black;"><i class="bi bi-download"></i> </button>
    </form>
    {% endif %}
</div>
</td>
        <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="5" type="text " placeholder="Search..."></td>
        <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="20" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="21" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="22" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="23" type="text" placeholder="Search..."></td>    
        <td><input  class="column-search" data-col="24" type="text" placeholder="Search..."></td>
      </tr>
    </thead>
    <tbody id="alldonations">
      <!-- üßæ Paginated Donation Records -->
      {% for donation in donation_page_obj %}
      <tr>
        <td>
          <div class="d-inline-flex align-items-center gap-1">
{% if not donation.is_deleted %}
   {% if permissions.can_add %}
<a href="{% url 'donation_summary' donation.id %}"
   style="font-size: 20px; text-decoration: none; vertical-align: middle;">
   <i class="fa-solid fa-plus"></i>
</a>
{% endif %}
{% if permissions.can_edit %}
            <a href="{% url 'edit_donation' donation.id %}" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;">
              <i class="bi bi-pencil-square"></i> </a>
{% endif %}
            {% if permissions.can_delete %}
            <form method="POST" action="{% url 'delete_donation' donation.id %}" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn-sm p-1" style="font-size: 15px; color:black ; text-decoration: none;   background-color: transparent !important;"
                onclick="return confirm('Are you sure you want to deactivate this donation?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
            {% endif %}
            {% if donation.verified %}
     <a href="{% url 'donation_receipt_preview' donation.id %}" style="font-size: 17px;"><i class="fa-solid fa-eye"></i></a>
     {% endif %}
    {% if request.user.is_superuser %}
    {% if donation.verified %}
        <i class="fa-solid fa-circle-check"style="font-size: 17px; color:#16a34a;"title="Verified by Admin"></i>
    {% else %}
        <a href="{% url 'verify_donation' donation.id %}" onclick="return confirm('Verify this donation?')">
            <i class="fa-regular fa-circle-check"style="font-size: 17px; color:red;" title="Click to Verify"></i></a>
    {% endif %}
{% endif %}
{% else %}
<span class="badge1" style="font-size: 14px;"><i class="fa-solid fa-ban" title="Deactivate"></i></span>
{% endif %}
          </div>
        </td>
        <td>{{ donation.id }}</td>
                                <td>{{ donation.receipt_id }}</td>
        <td>{{ donation.donor.first_name }} {{ donation.donor.last_name }}</td>
        <td>{{ donation.donor.city }}</td>
        <td>{{ donation.donation_amount_declared }}</td>
        <td>{{ donation.donation_amount_paid }}</td>
        <td>{{ donation.donation_date }}</td>
      <td>{{ donation.donation_category.lookup_name }}</td>
        <td>{{ donation.payment_method.lookup_name }}</td>
        <td>{{ donation.transaction_id }}</td>
        <td>{{ donation.payment_status }}</td>
        <td>{{ donation.check_no }}</td>
        <td>{{ donation.place_of_donation }}</td>
        <td>{{ donation.description }}</td>
          <td>{{ donation.name_of_bank }}</td>
          <td>{{ donation.branch }}</td>
        <td>{{ donation.created_by }}</td>
        <td>{{ donation.created_at|date:"d M Y, h:i A" }}</td>
        <td>{{ donation.updated_by }}</td>
        <td>{{ donation.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if donation.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
        <td>{{ donation.deleted_by }}</td>
        <td>{{ donation.deleted_at|date:"d M Y, h:i A" }}</td>
                <td>{{ donation.verified_by }}</td>
      </tr>
      {% empty %}<tr><td colspan="10" class="text-muted py-4">No donations found.</td></tr>{% endfor %}
    </tbody>
  </table>
</div>
      {% elif query %}<p class="text-danger mt-3">No data found for "<strong>{{ query3 }}</strong>".</p>{% else %}
  <div class="table-responsive">
  <table class="table table-hover table-bordered align-middle paginated-table">
    <thead>
    <tr>
        <th>Action</th>
        <th class="sortable" data-col="1">ID <span class="sort-icon">‚¨ç</span></th>
                        <th class="sortable" data-col="1">Receipt ID <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="2">Donor <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="3">Address<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="4">Amount declared<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="5">Amount Paid<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="6">Date<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="7">Category<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="8">Payment Method<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Transaction ID<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="10">payment_status<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="11">Check number<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="12">Place of donation<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="13">Description<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="9">Bank Name <span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="10">Branch  <span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="14">Created By<span class="sort-icon">‚¨ç</span></th>  
        <th class="sortable" data-col="15">Created On<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="16">Updated By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="17">Updated On<span class="sort-icon">‚¨ç</span></th>  
        <th class="sortable" data-col="19">is_deleted<span class="sort-icon">‚¨ç</span></th>
                <th class="sortable" data-col="18">Deleted By<span class="sort-icon">‚¨ç</span></th>
        <th class="sortable" data-col="18">Deleted On<span class="sort-icon">‚¨ç</span></th>
              <th class="sortable" data-col="18">Verified by<span class="sort-icon">‚¨ç</span></th>

      </tr>
      <tr class="column-search-row">
      <td>
        <div class="d-flex justify-content-between">
          {% if permissions.can_add %}
    <a href="{% url 'adddonation' %}" style="font-size: 24px; text-decoration: none; vertical-align: middle; color: #16a34a;">
        <i class="fa-solid fa-plus"></i></a>
    {% endif %}
    {% if permissions.can_add %}
    <form method="GET" action="{% url 'search_donation' %}" style="margin: -9px; padding: 0;">
      <input type="hidden" name="q" value="{{ query3|default:'' }}">
    <input type="hidden" name="download" value="1">
    <button type="submit" class="btn btn-link" style="font-size:22px; color:black;"><i class="bi bi-download"></i></button>
    </form>
    {% endif %}
</div>
</td>
        <td><input  class="column-search" data-col="1" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="2" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="3" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="4" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="5" type="text " placeholder="Search..."></td>
        <td><input  class="column-search" data-col="6" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="7" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="8" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="9" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="10" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="11" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="12" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="13" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="14" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="15" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="16" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="17" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="18" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="19" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="20" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="21" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="22" type="text" placeholder="Search..."></td>
        <td><input  class="column-search" data-col="23" type="text" placeholder="Search..."></td>    
        <td><input  class="column-search" data-col="24" type="text" placeholder="Search..."></td>
      </tr>
    </thead>
    <tbody id="alldonations">
      <!-- üßæ Paginated Donation Records -->
    {% for donation in donation_page_obj %}
<tr>
  <td>
    <div class="d-inline-flex align-items-center gap-1">
{% if not donation.is_deleted %}
     {% if permissions.can_add %}
<a href="{% url 'donation_summary' donation.id %}"
   style="font-size: 20px; text-decoration: none; vertical-align: middle;">
   <i class="fa-solid fa-plus"></i>
</a>
{% endif %}
      {% if permissions.can_edit %}
        <a href="{% url 'edit_donation' donation.id %}" class="btn-sm p-1"
           style="font-size: 15px; color:black; text-decoration: none;">
          <i class="bi bi-pencil-square"></i>
        </a>
      {% endif %}

      {% if permissions.can_delete %}
        <form method="POST" action="{% url 'delete_donation' donation.id %}"
              class="d-inline m-0 p-0">
          {% csrf_token %}
          <button type="submit" class="btn-sm p-1"
                  style="font-size: 15px; color:black; background-color: transparent !important;"
                  onclick="return confirm('Are you sure you want to deactivate this donation?')">
            <i class="bi bi-trash"></i>
          </button>
        </form>

      {% if donation.verified %}
     <a href="{% url 'donation_receipt_preview' donation.id %}" style="font-size: 17px;"><i class="fa-solid fa-eye"></i></a>
     {% endif %}
        {% if request.user.is_superuser %}
          {% if donation.verified %}
            <i class="fa-solid fa-circle-check"
               style="font-size: 17px; color:#16a34a;"
               title="Verified by Admin"></i>
          {% else %}
            <a href="{% url 'verify_donation' donation.id %}"
               onclick="return confirm('Verify this donation?')">
              <i class="fa-regular fa-circle-check"
                 style="font-size: 17px; color:#555;"
                 title="Click to Verify"></i>
            </a>
          {% endif %}
        {% endif %}

      {% endif %}  {# ‚úÖ THIS WAS MISSING #}
{% else %}
<span class="badge1" style="font-size: 14px;"><i class="fa-solid fa-ban" title="Deactivate"></i></span>
{% endif %}
    </div>
  </td>
  <td>{{ donation.id }}</td>
  <td>{{ donation.receipt_id }}</td>
  <td>{{ donation.donor.first_name }} {{ donation.donor.last_name }}</td>
  <td>{{ donation.donor.city }}</td>
  <td>{{ donation.donation_amount_paid }}</td>
  <td>{{ donation.donation_date }}</td>
  <td>{{ donation.donation_category.lookup_name }}</td>
  <td>{{ donation.payment_method.lookup_name }}</td>
  <td>{{ donation.payment_method }}</td>
  <td>{{ donation.transaction_id }}</td>
  <td>{{ donation.payment_status }}</td>
  <td>{{ donation.check_no }}</td>
  <td>{{ donation.place_of_donation }}</td>
  <td>{{ donation.description }}</td>
    <td>{{ donation.name_of_bank }}</td>
          <td>{{ donation.branch }}</td>
  <td>{{ donation.created_by }}</td>
  <td>{{ donation.created_at|date:"d M Y, h:i A" }}</td>
  <td>{{ donation.updated_by }}</td>
  <td>{{ donation.updated_at|date:"d M Y, h:i A" }}</td>
<td>
    {% if donation.is_deleted %}
        Yes
    {% else %}
        No
    {% endif %}
</td>
  <td>{{ donation.deleted_by }}</td>
  <td>{{ donation.deleted_at|date:"d M Y, h:i A" }}</td>
  <td>{{ donation.verified_by }}</td>
</tr>
{% empty %}
<tr>
  <td colspan="20" class="text-muted py-4 text-center">
    No donations found.
  </td>
</tr>
{% endfor %}
    </tbody>
  </table>
</div>
</div>
<!-- ‚úÖ Scrollbar + Style -->
<style>
.table-responsive::-webkit-scrollbar {
  width: 10px;
}
.table-responsive::-webkit-scrollbar-thumb {
  background-color: #007bff;
  border-radius: 10px;
}
.table-responsive::-webkit-scrollbar-track {
  background-color: #f1f1f1;
}

/* ‚úÖ Left-align table text (no centering) */
.paginated-table th,
.paginated-table td {
  text-align: left;
  vertical-align: middle;
}
</style>
      {% endif %}
    </div>
    <div class="pagination-container text-center mt-3">
  {% if donation_page_obj.has_previous %}
      <a href="?donation_page=1" class="btn btn-outline-primary btn-sm me-2">‚èÆ</a>
    <a href="?donation_page={{ donation_page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm me-2">‚óÄ</a>
  {% endif %}
  <!-- Page Info + Dropdown -->
  <form method="get" class="d-inline-block">
    <label for="pageSelect" class="fw-bold me-1">Page</label>
    <select name="donation_page" id="pageSelect" class="form-select form-select-sm d-inline-block w-auto"onchange="this.form.submit()">
      {% for page_num in donation_page_obj.paginator.page_range %}
        <option value="{{ page_num }}" {% if page_num == donation_page_obj.number %}selected{% endif %}>{{ page_num }}</option>
      {% endfor %}
    </select>
    <span class="fw-bold">of {{ donation_page_obj.paginator.num_pages }}</span>
  </form>
  {% if donation_page_obj.has_next %}
    <a href="?donation_page={{ donation_page_obj.next_page_number }}" class="btn btn-outline-primary btn-sm ms-2">‚ñ∂</a>
    <a href="?donation_page={{ donation_page_obj.paginator.num_pages }}" class="btn btn-outline-primary btn-sm ms-2">‚è≠</a>
  {% endif %}
</div>
</div>
<style>
.download-container {
  border-radius: 12px;
  margin: 40px auto;
  font-family: "Segoe UI", sans-serif;
}

.download-container h3 {
  color: #065f46;
  text-align: center;
  margin-bottom: 25px;
  font-size: 20px;
}

.download-form {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
}

.download-group {
  display: flex;
  flex-direction: column;
}

.download-group label {
  font-weight: 600;
  color: #374151;
  margin-bottom: 5px;
  font-size: 14px;
}
</style>
<!-- ----------Financial Asset Module----------- -->
<div class="tab-content" id="Financial Asset Module">
            <div class="content-header">
                <h1>Financial Asset Module</h1>
                <p>Manage financial assets and investments</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-graph-up"></i>
                <h2>Financial Asset Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Expense Module----------- -->
<div class="tab-content" id="Expense Module">
            <div class="content-header">
                <h1>Expense Module</h1>
                <p>Manage expenses and reimbursements</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-receipt"></i>
                <h2>Expense Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Medical Module----------- -->
<div class="tab-content" id="Medical Module">
            <div class="content-header">
                <h1>Medical Module</h1>
                <p>Manage medical services and records</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-hospital"></i>
                <h2>Medical Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Rehabilitation Module----------- -->
<div class="tab-content" id="Rehabilitation Module">
            <div class="content-header">
                <h1>Rehabilitation Module</h1>
                <p>Manage rehabilitation programs and services</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-house-heart"></i>
                <h2>Rehabilitation Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Adoption Module----------- -->
<div class="tab-content" id="Adoption Module">
            <div class="content-header">
                <h1>Adoption Module</h1>
                <p>Manage adoption processes and records</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-people-fill"></i>
                <h2>Adoption Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Trees Module----------- -->

<div class="tab-content" id="Trees Module">
            <div class="content-header">
                <h1>Trees Module</h1>
                <p>Manage tree plantation and conservation</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-tree"></i>
                <h2>Trees Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
<!-- ----------Seeds Module----------- -->

<div class="tab-content" id="Seeds Module">
            <div class="content-header">
                <h1>Seeds Module</h1>
                <p>Manage seed distribution and inventory</p>
            </div>
            <div class="placeholder-content">
                <i class="bi bi-flower1"></i>
                <h2>Seeds Module</h2>
                <p>This module is under development. Check back soon for updates.</p>
            </div>
</div>
</div>
</div>
<!-- -----------Javascript-------------- -->
 
<script>
document.addEventListener("DOMContentLoaded", function () {

    document.querySelectorAll(".live-search").forEach(input => {

        // üîπ Live search (already working)
        input.addEventListener("input", function () {
            const query = this.value.toLowerCase().trim();
            const targetId = this.dataset.target;
            const rows = document.querySelectorAll(`#${targetId} tr`);

            rows.forEach(row => {
                row.style.display = row.textContent.toLowerCase().includes(query)
                    ? ""
                    : "none";
            });
        });

        // üîπ PREVENT ENTER KEY
        input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault();   // ‚ùå stop form submit
            }
        });

    });

});
</script>



<!-- -----------Javascript-------------- -->
<script>
let images = [];
let currentIndex = 0;

function openImagesPopup(idImg, panImg) {
  images = [];

  if (idImg) {
    images.push({ url: idImg, title: "ID Proof" });
  }
  if (panImg) {
    images.push({ url: panImg, title: "PAN Card" });
  }

  if (!images.length) return;

  currentIndex = 0;
  showImage();
  document.getElementById("imagePopup").style.display = "flex";
}

function showImage() {
  document.getElementById("popupImage").src = images[currentIndex].url;
  document.getElementById("imageTitle").innerText = images[currentIndex].title;
}

function nextImg() {
  if (currentIndex < images.length - 1) {
    currentIndex++;
    showImage();
  }
}

function prevImg() {
  if (currentIndex > 0) {
    currentIndex--;
    showImage();
  }
}

function closeImagePopup() {
  document.getElementById("imagePopup").style.display = "none";
  document.getElementById("popupImage").src = "";
  document.getElementById("imageTitle").innerText = "";
  images = [];
}
</script>

<script>
function openQrPopup(imageUrl, keyId, donationId) {
  document.getElementById("qrImage").src = imageUrl;

  // ‚úÖ IDs match popup HTML
  document.getElementById("key_id").innerText = keyId || "-";
  document.getElementById("donation_id").innerText = donationId || "-";

  document.getElementById("qrDownload").href = imageUrl;
  document.getElementById("qrModal").style.display = "block";
}

function closeQrPopup() {
  document.getElementById("qrModal").style.display = "none";
  document.getElementById("qrImage").src = "";
}
</script>
 <script>
document.querySelectorAll("th.sortable").forEach(header => {
    header.addEventListener("click", function () {
        let table = header.closest("table");
        let tbody = table.querySelector("tbody");
        if (!tbody) return;
        let rows = Array.from(tbody.querySelectorAll("tr:not(.column-search-row)"));
        let colIndex = parseInt(header.dataset.col);
        let sortIcon = header.querySelector(".sort-icon");
        let ascending = sortIcon.dataset.order !== "asc";
        rows.sort((a, b) => {
            if (!a.children[colIndex] || !b.children[colIndex]) return 0;
            let A = a.children[colIndex].innerText.trim();
            let B = b.children[colIndex].innerText.trim();
            if (!isNaN(A) && !isNaN(B)) {
                return ascending ? A - B : B - A;
            }
            if (!isNaN(Date.parse(A)) && !isNaN(Date.parse(B))) {
                return ascending
                    ? new Date(A) - new Date(B)
                    : new Date(B) - new Date(A);
            }
            return ascending ? A.localeCompare(B) : B.localeCompare(A);
        });
        rows.forEach(row => tbody.appendChild(row));
        table.querySelectorAll(".sort-icon").forEach(icon => {
            icon.innerText = "‚¨ç";
            icon.dataset.order = "";
        });

        // set this header's icon
        sortIcon.innerText = ascending ? "‚¨Ü" : "‚¨á";
        sortIcon.dataset.order = ascending ? "asc" : "desc";
    });
});
</script>
<script>
let timer;
document.addEventListener("input", function (event) {
    if (!event.target.classList.contains("column-search")) return;
    clearTimeout(timer);
    timer = setTimeout(() => {
        let input = event.target;
        let col = input.dataset.col;
        let filter = input.value.toLowerCase();
        let table = input.closest("table");
        let rows = table.querySelectorAll("tbody tr");
        rows.forEach(row => {
            if (row.classList.contains("column-search-row")) return;

            let cell = row.cells[col];
            if (!cell) return;
            let text = cell.innerText.toLowerCase();
            row.style.display = text.includes(filter) ? "" : "none";
        });
    }, 120); // delay for smoothness
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    function activateTab(tabId){
      tabBtns.forEach(t => t.classList.remove('active'));
      tabContents.forEach(c => c.classList.remove('active'));

      const btn = document.querySelector('.tab-btn[data-tab="'+ tabId +'"]');
      if(btn) btn.classList.add('active');
      let content = document.getElementById(tabId);
      if(!content) {
        try{
          if(window.CSS && CSS.escape) {
            content = document.querySelector('.tab-content[id="'+ CSS.escape(tabId) +'"]');
          }
        } catch(e) {
        }
      }
      if(!content) {
        content = Array.from(tabContents).find(c => c.id === tabId);
      }
      if(content) content.classList.add('active');
    }
    window.activateTab = activateTab;
    const backFromForm = localStorage.getItem('backFromForm');
    if(backFromForm){
        const lastTab = localStorage.getItem('activeTab');
        activateTab(lastTab);  
        localStorage.removeItem('backFromForm'); 
    } else {
        // Normal visit, open saved tab or default dashboard
        const saved = localStorage.getItem('activeTab') || 'default-user';
        activateTab(saved);
    }

    // Save clicked tab
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function(){
            const tabId = this.dataset.tab;
            localStorage.setItem('activeTab', tabId);
            activateTab(tabId);
        });
    });

});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Sidebar toggle functionality
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const toggleIcon = document.getElementById('toggleIcon');
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        
        // Desktop sidebar toggle
        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            
            // Change icon based on sidebar state
            if (sidebar.classList.contains('collapsed')) {
                toggleIcon.className = 'bi bi-chevron-right';
            } else {
                toggleIcon.className = 'bi bi-chevron-left';
            }
        });
        
        // Mobile menu toggle
        mobileMenuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
                document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                if (!sidebar.contains(event.target) && !mobileMenuToggle.contains(event.target)) {
                    sidebar.classList.remove('active');
                }
            }
        });
                const tabs = document.querySelectorAll('.sidebar a');
        const contents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
          tab.addEventListener('click', function(e) {
            e.preventDefault();

            // Visual active state for sidebar anchors
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            const targetId = this.getAttribute('data-tab');

            // Prefer shared activateTab if available (handles spaces/special chars)
            if (window.activateTab && typeof window.activateTab === 'function') {
              window.activateTab(targetId);
            } else {
              // Fallback: robustly find content
              contents.forEach(c => c.classList.remove('active'));
              let targetContent = document.getElementById(targetId);
              if (!targetContent) {
                try { if (window.CSS && CSS.escape) targetContent = document.querySelector('.tab-content[id="'+CSS.escape(targetId)+'"]'); } catch(e) {}
                if (!targetContent) targetContent = Array.from(contents).find(c => c.id === targetId);
              }
              if (targetContent) targetContent.classList.add('active');
            }

            // Close mobile sidebar after selecting a tab
            if (window.innerWidth <= 768) {
              sidebar.classList.remove('active');
            }
          });
        });
        
        // --- Multi-step form functionality (Generic) ---
        function setupMultiStepForm(formId, progressBarId) {
            const form = document.getElementById(formId);
            if (!form) return;

            const progressBar = document.getElementById(progressBarId);
            const nextBtns = form.querySelectorAll('.next');
            const prevBtns = form.querySelectorAll('.prev');
            const formSteps = form.querySelectorAll('.form-step');
            const progressSteps = progressBar ? progressBar.querySelectorAll('.progress-step') : [];
            let currentStep = 0;

            // Function to update progress bar
            function updateProgressBar() {
                progressSteps.forEach((step, index) => {
                    if (index < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
            }

            // Next button functionality
            nextBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const inputs = formSteps[currentStep].querySelectorAll('input[required], select[required], textarea[required]');
                    let isValid = true;
                    
                    inputs.forEach(input => {
                        if (!input.checkValidity()) {
                            input.reportValidity();
                            isValid = false;
                        }
                    });
                    
                    if (isValid) {
                        formSteps[currentStep].classList.remove('active');
                        currentStep++;
                        formSteps[currentStep].classList.add('active');
                        updateProgressBar();
                        form.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
            
            // Previous button functionality
            prevBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    formSteps[currentStep].classList.remove('active');
                    currentStep--;
                    formSteps[currentStep].classList.add('active');
                    updateProgressBar();
                    form.scrollIntoView({ behavior: 'smooth' });
                });
            });
            // Reset form step on submission (handled by individual listeners)
            form.addEventListener('submit', () => {
                formSteps[currentStep].classList.remove('active');
                currentStep = 0;
                formSteps[currentStep].classList.add('active');
                updateProgressBar();
            });
        }
        setupMultiStepForm('multiStepForm', 'progressBar');
        setupMultiStepForm('donationForm', 'donationProgressBar');        
        // Employee Form Submission
        document.getElementById('multiStepForm').addEventListener('submit', (e) => {
            e.preventDefault();
            showSuccessMessage('Employee information has been submitted successfully.');
            document.getElementById('multiStepForm').reset();
        });

        // Donation Form Submission
        document.getElementById('donationForm').addEventListener('submit', (e) => {
            e.preventDefault();
            showSuccessMessage('Donation has been recorded successfully.');
            document.getElementById('donationForm').reset();
        });

        function showSuccessMessage(message) {
            const successMessage = document.createElement('div');
            successMessage.className = 'alert alert-success';
            successMessage.innerHTML = `
                <i class="bi bi-check-circle-fill"></i>
                <strong>Success!</strong> ${message}
            `;
            successMessage.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background-color: #d4edda;
                color: #155724;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                z-index: 2000;
                display: flex;
                align-items: center;
                gap: 10px;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(successMessage);
            
            setTimeout(() => {
                successMessage.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(successMessage);
                }, 300);
            }, 5000);
        }
        
        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // JavaScript to toggle Donor Box ID input
        const personTypeSelect = document.getElementById('person_type');
        const donorBoxRow = document.getElementById('donor_box_id_row');

        function toggleDonorBoxInput() {
            if (personTypeSelect && donorBoxRow) {
                if (personTypeSelect.value === 'Donor-Box-Owner') {
                    donorBoxRow.style.display = 'block';
                    document.getElementById('donor_box_id').required = true;
                } else {
                    donorBoxRow.style.display = 'none';
                    document.getElementById('donor_box_id').required = false;
                }
            }
        }

        if (personTypeSelect) {
            personTypeSelect.addEventListener('change', toggleDonorBoxInput);
            toggleDonorBoxInput();
        }
    });
    <!-- JavaScript to toggle Donor Box ID input -->

document.addEventListener('DOMContentLoaded', function() {
    const personTypeSelect = document.getElementById('person_type');
    const donorBoxRow = document.getElementById('donor_box_id_row');

    function toggleDonorBoxInput() {
        if (personTypeSelect.value === 'Donor-Box-Owner') {
            donorBoxRow.style.display = 'block';
            document.getElementById('donor_box_id').required = true;
        } else {
            donorBoxRow.style.display = 'none';
            document.getElementById('donor_box_id').required = false;
        }
    }

    personTypeSelect.addEventListener('change', toggleDonorBoxInput);
    toggleDonorBoxInput(); // initialize on page load
});
</script>

{% endblock %}